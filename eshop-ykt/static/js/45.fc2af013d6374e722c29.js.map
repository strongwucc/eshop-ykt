{"version":3,"sources":["webpack:///src/components/login/login.vue","webpack:///./src/components/login/login.vue?8d63","webpack:///./src/components/login/login.vue"],"names":["login","name","data","tel","veriCode","verifyErrorCount","vcode","env","wait60s","posting","second","redirect","this","$route","query","activated","$setgoindex","computed","extends_default","Object","vuex_esm","storeInfo","state","common","common_data","store_info","methods","getCode","_this","valid","check_mobile","$myLoading","open","text","spinnerType","$http","post","API","auth","mobile_code","phoneNumber","type","then","res","close","return_code","vm","timer","setInterval","clearInterval","$myToast","return_msg","doLogin","_this2","captcha","set_user_login_status","set_user_info","userinfo","set_user_bind_status","$router","push","goindex","back","login_login","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","height","_v","directives","rawName","value","expression","attrs","src","__webpack_require__","placeholder","domProps","on","input","$event","target","composing","maxlength","click","_s","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/45.fc2af013d6374e722c29.js","sourcesContent":["<template>\r\n  <div class=\"bind-tel-page\">\r\n    <div class=\"mask-wrapper\">\r\n      <div style=\"height: 2px\"></div>\r\n      <img class=\"store-logo\" v-if=\"storeInfo\" v-lazy=\"storeInfo.store_log\"/>\r\n      <img class=\"store-logo\" v-else src=\"../../assets/img/common/login_logo_default@2x.png\"/>\r\n      <div class=\"input-wrapper tel\">\r\n        <input type=\"tel\" v-model=\"tel\" placeholder=\"请输入手机号\"/>\r\n      </div>\r\n      <div class=\"input-wrapper veri-code\">\r\n        <input type=\"text\" v-model=\"veriCode\" maxlength=\"6\" placeholder=\"请输入验证码\"/>\r\n        <div class=\"get-code\">\r\n          <span class=\"get\" v-show=\"!wait60s\" @click=\"getCode\">获取验证码</span>\r\n          <span class=\"repeat-get\" v-show=\"wait60s\">\r\n            重新发送({{second}}s)\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <button class=\"btn\" @click=\"doLogin\">\r\n        登录\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { rootUrl } from '../../config/env'\r\n  import Valid from '../../utils/valid'\r\n  import {mapState, mapMutations} from 'vuex'\r\n  export default {\r\n    name: \"login\",\r\n    data () {\r\n      return {\r\n        tel: '',\r\n        veriCode: '',\r\n        verifyErrorCount: 0,//手机验证码输入错误次数，错误三次显示图形验证码\r\n        vcode: rootUrl + 'index.php/index-gen_vcode-b2c-4.html',\r\n        wait60s: false,\r\n        posting: false,\r\n        second: 60,\r\n        redirect: this.$route.query.redirect\r\n      }\r\n    },\r\n    activated: function () {\r\n      this.$setgoindex()\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        storeInfo: state => state.common.common_data.store_info\r\n      })\r\n    },\r\n    methods: {\r\n      ...mapMutations([\r\n        'set_user_login_status',\r\n        'set_user_info',\r\n        'set_user_bind_status',\r\n      ]),\r\n      getCode () {\r\n        if (this.verifyErrorCount >= 3) {\r\n          return\r\n        }\r\n        if (! Valid.check_mobile(this.tel)) {\r\n          this.$myToast('请输入正确的手机号')\r\n          return\r\n        }\r\n\r\n        if (this.posting === true) {\r\n          return\r\n        }\r\n\r\n        this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\r\n        this.posting = true\r\n        this.$http.post(this.API.auth.mobile_code,{phoneNumber: this.tel, type: 'login'}).then(res => {\r\n\r\n          this.$myLoading.close()\r\n          this.posting = false\r\n          if (res.return_code === '0000') {\r\n            let vm = this\r\n            vm.wait60s = true\r\n            let timer = setInterval(() => {\r\n              vm.second -= 1\r\n              if (vm.second === 0) {\r\n                clearInterval(timer)\r\n                vm.wait60s = false\r\n                vm.second = 60\r\n              }\r\n            }, 1000)\r\n          } else {\r\n            this.$myToast(res.return_msg)\r\n            return\r\n          }\r\n        })\r\n      },\r\n      doLogin () {\r\n        if (! Valid.check_mobile(this.tel)) {\r\n          this.$myToast('请输入正确的手机号')\r\n          return\r\n        }\r\n\r\n        if (!this.veriCode) {\r\n          this.$myToast('请输入验证码')\r\n          return\r\n        }\r\n\r\n        this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\r\n        this.$http.post(this.API.auth.login,{phoneNumber: this.tel, captcha: this.veriCode, type: 'login'}).then(res => {\r\n          this.$myLoading.close()\r\n          if (res.return_code === '0000') {\r\n            if (this.redirect) {\r\n              this.set_user_login_status(1)\r\n              this.set_user_info(res.data.userinfo)\r\n              this.set_user_bind_status(1)\r\n              this.$router.push(this.redirect)\r\n            } else {\r\n              if (this.$route.query.goindex === 'true') {\r\n                this.$router.push('/center')\r\n              } else {\r\n                this.$router.back(-1)\r\n              }\r\n            }\r\n          } else {\r\n            this.verifyErrorCount += 1\r\n            this.$myToast(res.return_msg)\r\n            return\r\n          }\r\n        })\r\n\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import \"../../assets/css/common\";\r\n  .bind-tel-page{\r\n    height: 100%;\r\n    background: url(\"../../assets/img/home/login_bg@2x.png\") no-repeat;\r\n    background-size: 100% 100%;\r\n    background-position: center;\r\n    .mask-wrapper{\r\n      height: 100%;\r\n      background-color: rgba(0,0,0,.1);\r\n      .store-logo{\r\n        display: block;\r\n        width: 150px;\r\n        height: 150px;\r\n        margin: 146px auto 90px auto;\r\n      }\r\n      .input-wrapper{\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: 600px;\r\n        height: 98px;\r\n        border-radius: 49px;\r\n        background-color: #ffffff;\r\n        margin: 0 auto 20px auto;\r\n        input{\r\n          width: 440px;\r\n        }\r\n      }\r\n      .tel{\r\n        margin-top: 90px;\r\n      }\r\n      .veri-code{\r\n        position: relative;\r\n        .get-code{\r\n          position: absolute;\r\n          color: $themeColor;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n          right: 50px;\r\n          .repeat-get{\r\n            color: #999999;\r\n          }\r\n        }\r\n      }\r\n      .btn{\r\n        display: block;\r\n        width: 600px;\r\n        height: 98px;\r\n        font-size: 32px;\r\n        background-color: $themeColor;\r\n        margin: 60px auto 0 auto;\r\n        border-radius: 49px;\r\n      }\r\n    }\r\n\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bind-tel-page\"},[_c('div',{staticClass:\"mask-wrapper\"},[_c('div',{staticStyle:{\"height\":\"2px\"}}),_vm._v(\" \"),(_vm.storeInfo)?_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.storeInfo.store_log),expression:\"storeInfo.store_log\"}],staticClass:\"store-logo\"}):_c('img',{staticClass:\"store-logo\",attrs:{\"src\":require(\"../../assets/img/common/login_logo_default@2x.png\")}}),_vm._v(\" \"),_c('div',{staticClass:\"input-wrapper tel\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tel),expression:\"tel\"}],attrs:{\"type\":\"tel\",\"placeholder\":\"请输入手机号\"},domProps:{\"value\":(_vm.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.tel=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"input-wrapper veri-code\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.veriCode),expression:\"veriCode\"}],attrs:{\"type\":\"text\",\"maxlength\":\"6\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.veriCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.veriCode=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"get-code\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.wait60s),expression:\"!wait60s\"}],staticClass:\"get\",on:{\"click\":_vm.getCode}},[_vm._v(\"获取验证码\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.wait60s),expression:\"wait60s\"}],staticClass:\"repeat-get\"},[_vm._v(\"\\n          重新发送(\"+_vm._s(_vm.second)+\"s)\\n        \")])])]),_vm._v(\" \"),_c('button',{staticClass:\"btn\",on:{\"click\":_vm.doLogin}},[_vm._v(\"\\n      登录\\n    \")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-976eb554\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-976eb554\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-976eb554\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-976eb554\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}