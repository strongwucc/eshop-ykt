webpackJsonp([12],{"0w05":function(t,s){},LV3v:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),n=e("Dd8w"),o=e.n(n),r=e("NYxO"),c={name:"goods_specification",data:function(){return{appending:this.$route.query.appending,dish:null,adjunctsData:[],tastesData:[],showTastesData:[],adjunctsDataIndex:null,adjunctNumShow:!1,adjunctNum:1,tasteSelectedIndex:[],adjunctSelectedIndex:[]}},props:["info"],watch:{info:function(t){var s=this;this.dish=t,this.adjunctsData=[],this.tastesData=[],this.showTastesData=[],this.adjunctsDataIndex=null,this.adjunctNumShow=!1,this.adjunctNum=1,this.tasteSelectedIndex=[],this.adjunctSelectedIndex=[],this.dish.props.forEach(function(t){var e=t.values[0];if(e){s.tasteSelectedIndex[e.id]=!0;var i=s.getPropName(e.props_id);s.tastesData.push({props_id:e.props_id,name:i,items:[{props_value_id:e.id,props_name:e.name}]}),s.showTastesData.push({id:e.id,name:e.name})}})}},mounted:function(){this.$nextTick(function(){})},computed:o()({},Object(r.c)(["common"]),{adjunctTotal:function(){var t=0;return this.adjunctsData.forEach(function(s,e){t+=s.price*s.num}),this.NP.round(t,2)}}),methods:o()({},Object(r.b)(["set_user_cart"]),{wrapperAttr:function(){if(this.dish){var t=this.$refs.goodsSpecification.offsetHeight,s=this.$refs.goodsInfo.offsetHeight;this.$refs.specification.offsetHeight>t-s&&(this.$refs.wrapper.style.height=t-s+"px")}},close:function(){this.$emit("closeSpecs")},getPropName:function(t){var s="";return this.dish.props.forEach(function(e,i){e.props_id==t&&(s=e.name)}),s},selectTaste:function(t){var s=this,e=!1,i=!1,a=0,n=0;if(this.tastesData.forEach(function(s,o){t.props_id===s.props_id&&(a=o,e=!0,s.items.forEach(function(s,e){t.id===s.props_value_id&&(i=!0,n=e)}))}),!0===i)this.tasteSelectedIndex[t.id]=!1,this.tastesData[a].items.splice(n,1),this.showTastesData.splice(n,1);else if(!0===e){var o=this.dish.props[a];o&&o.values&&o.values.forEach(function(t){s.tasteSelectedIndex[t.id]&&(s.tasteSelectedIndex[t.id]=!1)}),this.tastesData[a].items=[],this.showTastesData=[],this.tasteSelectedIndex[t.id]=!0,this.tastesData[a].items.push({props_value_id:t.id,props_name:t.name}),this.showTastesData.push({id:t.id,name:t.name})}else{this.tasteSelectedIndex[t.id]=!0;var r=this.getPropName(t.props_id);this.tastesData.push({props_id:t.props_id,name:r,items:[{props_value_id:t.id,props_name:t.name}]}),this.showTastesData.push({id:t.id,name:t.name})}},selectAjunct:function(t){var s=this.dish.adjuncts[t],e=!1,i=0;this.adjunctsData.forEach(function(t,a){s.bn===t.bn&&(e=!0,i=a)}),!0===e?(this.adjunctsData[i].num+=1,this.adjunctsDataIndex=i,this.adjunctNum=this.adjunctsData[i].num,this.adjunctSelectedIndex[t]+=1):(this.adjunctSelectedIndex[t]=1,this.adjunctsDataIndex=this.adjunctsData.length,this.adjunctNum=1,this.adjunctsData.push({bn:s.bn,name:s.name,price:s.member_price,num:1,index:t})),this.adjunctNumShow=!0},selectSpec:function(t){var s=this;if("1"===t.checked||""===t.product_id)return!1;var e=this.common.common_data.store_info.store_id;this.$http.post(this.API.seller.store_goods_detail,{store_id:e,product_id:t.product_id}).then(function(t){"0000"==t.return_code&&(s.dish=a()({},t.data.detail))})},minusAdjunct:function(){var t=this.adjunctsData[this.adjunctsDataIndex].num;1===t?(this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]=0,this.adjunctsData.splice(this.adjunctsDataIndex,1),this.adjunctNumShow=!1,this.adjunctsDataIndex=null,this.adjunctNum=1):(this.adjunctsData[this.adjunctsDataIndex].num=t-1,this.adjunctNum=t-1,this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]=t-1)},addAdjunct:function(){this.adjunctsData[this.adjunctsDataIndex].num+=1,this.adjunctNum+=1,this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]+=1},addCart:function(){var t=this,s=this.common.common_data.store_info.store_id,e=this.common.common_data.desk_info.desk_id,i=this.dish.product.bn,a=[];this.adjunctsData.forEach(function(t){var s={goods_bn:t.bn,num:t.num};a.push(s)});var n="1"===this.appending?this.API.cart.cart_append:this.API.cart.cart_add;this.$http.post(n,{store_id:s,desk_id:e,goods_bn:i,num:1,taste:this.tastesData,adjunct:a}).then(function(s){"0000"===s.return_code?(t.set_user_cart(s.data.user_cart),t.$emit("closeSpecs")):t.$myToast(s.return_msg)})}})},d={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"goodsSpecification",staticClass:"goods-specification"},[i("div",{staticClass:"close",on:{touchstart:t.close}},[i("img",{attrs:{src:e("qI6Q")}})]),t._v(" "),t.dish?i("div",{ref:"goodsInfo",staticClass:"goods-info"},[i("div",{staticClass:"goods-pic"},[t.dish.image_url?i("img",{staticClass:"pic",attrs:{src:t.dish.image_url}}):i("img",{staticClass:"pic",attrs:{src:e("3Cyy")}}),t._v(" "),t.dish.member_price?i("img",{staticClass:"member-tip",attrs:{src:e("T2dr")}}):t._e()]),t._v(" "),i("div",{staticClass:"r"},[i("p",{staticClass:"name"},[t._v("\n        "+t._s(t.dish.name)+"\n        "),i("span",{staticClass:"unit"},[t._v("/"+t._s(t.dish.unit))])]),t._v(" "),i("div",{staticClass:"price"},[i("span",{staticClass:"finally-price"},[i("span",{staticClass:"money-symbol"},[t._v("￥")]),t._v(t._s(t._f("formatActualMoney")(t.dish.member_price)))]),t._v(" "),t.NP.round(t.dish.price-t.dish.member_price)>0?i("span",{staticClass:"original-price"},[i("span",{staticClass:"money-symbol"},[t._v("￥")]),t._v(t._s(t._f("formatActualMoney")(t._f("formatMoney")(t.dish.price))))]):t._e()]),t._v(" "),i("div",{staticClass:"have-choose"},[t._v("\n        已选：\n        "),i("span",[t._l(t.tastesData,function(s,e){return[t._l(s.items,function(e,i){return[t._v("\n              "+t._s(e.props_name)+"\n              "),i===s.items.length-1?[t._v("；")]:t._e()]})]})],2),t._v(" "),i("span",[t._l(t.adjunctsData,function(s,e){return[t._v("\n            "+t._s(s.name)+"x"+t._s(s.num)+"\n            "),e===t.adjunctsData.length-1?[t._v("；")]:[t._v("，")]]})],2)])])]):t._e(),t._v(" "),t.dish?i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{ref:"specification",staticClass:"specification"},[t._l(t.dish.specs,function(s){return[i("div",{staticClass:"category"},[i("h4",{staticClass:"title"},[t._v(t._s(s.spec_name))]),t._v(" "),i("ul",{staticClass:"parameter-list"},t._l(s.items,function(s,e){return i("li",{staticClass:"parameter",class:{selected:"1"==s.checked},on:{click:function(e){t.selectSpec(s)}}},[i("span",{staticClass:"txt"},[t._v("\n            "+t._s(s.spec_value)+"\n          ")])])}))])]}),t._v(" "),t._l(t.dish.props,function(s){return[i("div",{staticClass:"category"},[i("h4",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),i("ul",{staticClass:"parameter-list"},t._l(s.values,function(s,e){return i("li",{staticClass:"parameter",class:{selected:t.tasteSelectedIndex[s.id]},on:{click:function(e){t.selectTaste(s)}}},[i("span",{staticClass:"txt"},[t._v("\n            "+t._s(s.name)+"\n          ")])])}))])]}),t._v(" "),t.dish.adjuncts.length>0?i("div",{staticClass:"category"},[i("h4",{staticClass:"title"},[t._v("配菜")]),t._v(" "),i("ul",{staticClass:"parameter-list"},t._l(t.dish.adjuncts,function(s,e){return i("li",{staticClass:"parameter",class:{selected:t.adjunctSelectedIndex[e]},on:{click:function(s){t.selectAjunct(e)}}},[i("span",{staticClass:"txt"},[t._v("\n              "+t._s(s.name)+"\n              "),s.member_price?i("span",{staticClass:"price"},[t._v("￥"+t._s(s.member_price))]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.adjunctSelectedIndex[e],expression:"adjunctSelectedIndex[index]"}],staticClass:"selected-num"},[t._v("\n              "+t._s(t.adjunctSelectedIndex[e])+"\n            ")])])}))]):t._e(),t._v(" "),i("div",{staticClass:"filler"})],2)]):t._e(),t._v(" "),i("div",{staticClass:"bottom-assembly"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.adjunctNumShow,expression:"adjunctNumShow"}],staticClass:"num"},[i("span",{staticClass:"title"},[t._v("配菜数量")]),t._v(" "),i("div",{staticClass:"inputNumber"},[i("i",{staticClass:"reduce",on:{click:t.minusAdjunct}},[i("img",{attrs:{src:e("OE/g")}})]),t._v("\n        "+t._s(t.adjunctNum)+"\n        "),i("i",{staticClass:"add",on:{click:t.addAdjunct}},[i("img",{attrs:{src:e("Aazb")}})])])]),t._v(" "),i("button",{staticClass:"add-cart",on:{click:t.addCart}},[t._v("加入购物车")])])])},staticRenderFns:[]};var l=e("VU/8")(c,d,!1,function(t){e("0w05")},"data-v-7231fe29",null);s.a=l.exports},bzIW:function(t,s){},ewvu:function(t,s,e){t.exports=e.p+"static/img/img1@2x.b37bc37.png"},jyNL:function(t,s){},vyE0:function(t,s,e){"use strict";var i=e("Dd8w"),a=e.n(i),n=e("NYxO"),o={name:"floating",data:function(){return{featuresViewVisible:!1}},props:{appending:{type:Boolean,default:!1}},computed:a()({},Object(n.c)({userCart:function(t){return t.user.user_cart},deskId:function(t){return t.common.common_data.desk_info.desk_id},storeId:function(t){return t.common.common_data.store_info.store_id},people:function(t){return t.common.common_data.desk_info.info.people}}),{totalNum:function(){var t=0;return this.userCart.goods_list&&this.userCart.goods_list.forEach(function(s){t+=parseInt(s.num)}),t},totalPrice:function(){var t=0,s=0;if(this.userCart.goods_list&&this.userCart.goods_list.forEach(function(s){t+=s.num*s.price}),this.userCart.adjunct_list){var e=void 0;for(e in this.userCart.adjunct_list)this.userCart.adjunct_list[e].forEach(function(t){t.forEach(function(t){s+=t.num*t.price})})}return this.NP.round(t+s,2)}}),created:function(){},methods:{featuresViewtoggle:function(){this.featuresViewVisible=!this.featuresViewVisible},goShopCart:function(){this.appending?this.$router.push("/shop_cart?appending=1"):this.$router.push("/shop_cart")}}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"floating-box"},[i("div",{staticClass:"features"},[i("div",{staticClass:"title",on:{click:t.featuresViewtoggle}},[i("img",{staticClass:"icon",attrs:{src:e("DHIp")}}),t._v("\n      功能\n    ")]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.featuresViewVisible,expression:"featuresViewVisible"}],staticClass:"list"},[i("li",{on:{click:function(s){t.$router.push("/center")}}},[t._v("会员中心")]),t._v(" "),i("li",{on:{click:function(s){t.$router.push("/my_order/dine")}}},[t._v("我的订单")]),t._v(" "),i("li",{on:{click:function(s){t.$router.push("/my_coupons")}}},[t._v("我的优惠券")]),t._v(" "),i("li",{on:{click:function(s){t.$router.push("/shop_cart")}}},[t._v("购物车")]),t._v(" "),t.appending?i("li",{on:{click:function(s){t.$router.push({name:"confirm_pay",params:{deskId:t.deskId}})}}},[t._v("结账")]):t._e()])]),t._v(" "),i("div",{staticClass:"shopping-cart",on:{click:t.goShopCart}},[i("div",{ref:"cartContainer",staticClass:"circle"},[t.totalNum?i("div",{staticClass:"num"},[t._v(t._s(t.totalNum))]):t._e()]),t._v(" "),i("p",{staticClass:"total"},[t._v("￥"),i("span",[t._v(t._s(t._f("formatActualMoney")(t.totalPrice)))])])])])},staticRenderFns:[]};var c=e("VU/8")(o,r,!1,function(t){e("jyNL")},"data-v-be508818",null);s.a=c.exports},"z9/y":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Gu7T"),a=e.n(i),n=e("c/Tr"),o=e.n(n),r=e("Dd8w"),c=e.n(r),d=e("GQaK"),l=e("HR77"),h=e("vyE0"),u=e("MYSA"),p=e("LV3v"),_=e("NYxO"),f=document.querySelector("html").getAttribute("data-dpr"),m={name:"home",data:function(){return{appending:!1,windowHeight:0,standardLength:0,showSimulationBtn:!0,showStoreInfo:!1,showLoading:!0,storeId:this.$route.params.storeId,deskId:this.$route.params.deskId,peopleNum:this.$route.params.peopleNum,directlyAdd:0,operation:!0,blockSearhIocn:!0,graySearhIocn:!1,dishes:[],bodyScroll:!0,sideScroll:!1,mainScroll:!1,mainReachTop:!0,sideReachTop:!0,jsScroll:!1,featuresViewVisible:!1,goodsTitleListTop:[],goodsListTop:[],mainLengthDifference:0,catIndex:0,catIndexChange:!0,showMoveDot:[],receiveInCart:!1,categoryNum:[],totalPrice:0,cartFoodList:[],specsVisible:!1,specificationInfo:[],goodsDetailVisible:!1,goodsPic:"",storeInf:{store_log:"",desk:{},store_name:"",open_time:""},gettingGoodsDetail:!1,deskStatusTimer:null}},components:{Goods:l.a,Floating:h.a,StoreInfo:u.a,GoodsSpecification:p.a},watch:{bodyScroll:function(t){t?(this._bodyScroll.enable(),this._bodyScroll.scrollTo(0,0,400)):this._bodyScroll.disable()},sideScroll:function(t){t?(this._sideScroll.enable(),this.touchStartX&&this.touchStartX<this.elementsStyle.SIDE_WIDTH&&!this.jsScroll&&document.querySelector(".side").offsetHeight<document.querySelector(".side").children[0].offsetHeight&&this._sideScroll.scrollTo(0,-200*f,1e3)):this._sideScroll.disable()},catIndex:function(t){var s=this.$refs.sideScrollBox.offsetHeight;this.goodsTitleListTop[t]>s&&this._sideScroll.scrollTo(0,this.goodsTitleListTop[t]-s,200)},showLoading:function(t){var s=this;t||this.$nextTick(function(){s.getdishesHeight()})}},beforeDestroy:function(){clearInterval(this.deskStatusTimer)},beforeRouteEnter:function(t,s,e){e(function(t){"people_num"!==s.name&&t.getStoreInfo()})},created:function(){this.elementsStyle=null,this.$store.state.common.common_data.store_info&&(this.storeInf=this.$store.state.common.common_data.store_info),this.$route.query.appending?this.appending=!0:this.deskStatusTimer=setInterval(this.deskStatus,5e3)},mounted:function(){this.axiosAll()},computed:c()({},Object(_.c)({userCart:function(t){return t.user.user_cart},deskInfo:function(t){return t.common.common_data.desk_info}})),methods:c()({},Object(_.b)(["set_user_cart","set_common_data_store_info","set_common_data_desk_info"]),{getStoreInfo:function(){var t=this;this.$http.post(this.API.seller.store_info,{store_id:this.storeId,desk_id:this.deskId}).then(function(s){"0000"===s.return_code?(t.storeInfo=s.data.store,t.set_user_cart(s.data.user_cart),s.data.store&&(t.set_common_data_store_info(s.data.store),t.storeInf=s.data.store),s.data.desk&&t.set_common_data_desk_info(s.data.desk),"0"==s.data.desk.status?t.$router.push("/people_num/"+t.storeId+"/"+t.deskId):t.appending||("2"==s.data.desk.status?t.$router.push("/confirm_pay/"+t.deskId):"3"==s.data.desk.status?t.$router.push("/merchant_confirm/"+t.deskId):"4"==s.data.desk.status||"5"==s.data.desk.status?t.$router.push("/order_detail/dine_detail/"+s.data.desk.info.order_id):"6"==s.data.desk.status&&t.$router.push("/order_detail/dine_detail/"+s.data.desk.info.order_id))):t.$myToast(s.return_msg)})},goSearch:function(){this.$router.push({name:"search",params:{storeId:this.storeId,deskId:this.deskId,peopleNum:this.peopleNum}})},initDishes:function(){return this.$http.post(this.API.seller.store_goods,{store_id:this.storeId})},axiosAll:function(){var t=this;this.$myLoading.open({text:"加载中...",spinnerType:"fading-circle"}),this.$http.all([this.initDishes()]).then(function(s){if("0000"===s[0].return_code){t.dishes=s[0].data.list;var e=[];t.dishes.forEach(function(t){e.push(t.cat_id)}),t.catIdList=e,t.$nextTick(function(){t._getStyle(),t._setStyle(),t._bodyScrollEvent(),t._pageTouchListener()}),t.showLoading=!1,t.$myLoading.close()}else t.$myToast(s[0].return_msg)})},changeCategroyNum:function(t){this.categoryNum=t},featuresViewtoggle:function(){this.featuresViewVisible=!this.featuresViewVisible},showSpecsList:function(t){var s=this;if(this.gettingGoodsDetail)return!1;this.gettingGoodsDetail=!0,this.$http.post(this.API.seller.store_goods_detail,{store_id:this.storeId,product_id:t.product.product_id}).then(function(t){s.gettingGoodsDetail=!1,"0000"==t.return_code&&(s.specsVisible=!0,s.specificationInfo=t.data.detail)})},closeSpecsList:function(){this.specsVisible=!1},showGoodsDetail:function(t){this.goodsPic=t,this.goodsDetailVisible=!0},getdishesHeight:function(){var t=this,s=this.$refs.mainScrollBox,e=this.$refs.sideScrollBox,i=o()(s.children[0].children),a=o()(e.children[0].children);this.mainLengthDifference=s.children[0].offsetHeight-s.offsetHeight,i.forEach(function(s,e){t.goodsListTop[e]=s.offsetTop}),a.forEach(function(s,i,a){i!==a.length-1?t.goodsTitleListTop[i]=a[i+1].offsetTop:t.goodsTitleListTop[i]=e.children[0].offsetHeight}),this._sideScrollEvent(),this._mainScrollEvent()},chooseMenu:function(t){this.catIndex=t,this.catIndexChange=!1,this.jsScroll=!0,this._bodyScroll.scrollTo(0,-this.elementsStyle.SCROLL_HEIGHT,400),this._mainScroll.scrollTo(0,-this.goodsListTop[this.catIndex],400)},showMoveDotFun:function(t,s,e){this.showMoveDot=[].concat(a()(this.showMoveDot),a()(t)),this.elLeft=s,this.elBottom=e},beforeEnter:function(t){t.style.transform="translate3d(0,"+(this.elBottom-this.windowHeight+.4*this.standardLength)+"px,0)",t.children[0].style.transform="translate3d("+(this.elLeft-3*this.standardLength)+"px,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var s=this;t.style.transform="translate3d(0,0,0)",t.children[0].style.transform="translate3d(0,0,0)",t.style.transition="transform .5s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transition="transform .5s linear",this.showMoveDot=this.showMoveDot.map(function(t){return!1}),t.children[0].style.opacity=1,t.children[0].addEventListener("transitionend",function(){s.listenInCart()},!!this.$passiveSupported&&{passive:!0}),t.children[0].addEventListener("webkitAnimationEnd",function(){s.listenInCart()},!!this.$passiveSupported&&{passive:!0})},listenInCart:function(){this.receiveInCart||(this.receiveInCart=!0)},_getStyle:function(){document.getElementById("app").style.height=window.innerHeight+"px";var t=this.$refs.banner,s=this.$refs.storeInfo,e=document.querySelector(".search-icon"),i=document.querySelector(".table-num"),a=document.querySelector(".side");this.windowHeight=window.innerHeight,this.standardLength=this.$refs._100px.offsetWidth,this.elementsStyle={REDUCE_HEIGHT:t.offsetHeight/2+i.offsetHeight,SCROLL_HEIGHT:t.offsetHeight/2+s.offsetHeight,SEARCHICON_TRANSLATE_Y:(t.offsetHeight/2-e.offsetHeight)/2+t.offsetHeight/2+e.offsetHeight/2,SEARCHICON_TRANSLATE_X:(window.innerWidth-2*e.offsetWidth-220*f)/2,SEARCHICON_INIT_WIDTH:e.offsetWidth,SEARCH_ADD_WIDTH:220*f,SEARCHICON_INIT_RADIUS:15*f,SEARCHICON_ADD_RADIUS:11*f,SEARCHICON_GRAY:115*f,SIDE_WIDTH:a.offsetWidth,SIDE_HEIGHT:a.offsetHeight,SIDE_UL_HEIGHT:a.children[0].offsetHeight}},_setStyle:function(){this.$refs._wrapper.style.paddingTop=this.$refs.banner.offsetHeight+this.$refs.storeInfo.offsetHeight+"px",this.$refs.overview.style.height=window.innerHeight-this.elementsStyle.REDUCE_HEIGHT+"px"},_bodyScrollEvent:function(){var t=this;this._bodyScroll=new d.a(this.$refs.scrollWrapper,{scrollY:!0,click:!1,tap:!0,bounce:!1,probeType:3,flickLimitDistance:this.standardLength/2});var s=this.$refs.logo,e=this.$refs.searchIcon,i=this.elementsStyle;this._bodyScroll.on("scroll",function(a){var n=-a.y.toFixed(1),o=(i.SCROLL_HEIGHT-n)/i.SCROLL_HEIGHT;s.style.opacity=o,s.style.transform="scale("+o+")",a.y<-5?t.blockSearhIocn=!1:t.blockSearhIocn=!0,a.y<-i.SEARCHICON_GRAY?t.graySearhIocn=!0:t.graySearhIocn=!1,e.style.transform="translate(-"+(1-o)*i.SEARCHICON_TRANSLATE_X+"px, -"+(1-o)*i.SEARCHICON_TRANSLATE_Y+"px)",e.style.width=(1-o)*i.SEARCH_ADD_WIDTH+i.SEARCHICON_INIT_WIDTH+"px",e.style.borderRadius=i.SEARCHICON_INIT_RADIUS-(1-o)*i.SEARCHICON_ADD_RADIUS+"px"}),this._bodyScroll.on("scrollEnd",function(s){-s.y===i.SCROLL_HEIGHT?(t.bodyScroll=!1,t.showSimulationBtn=!1):t.showSimulationBtn=!0})},_sideScrollEvent:function(){var t=this;this._sideScroll=new d.a(this.$refs.sideScrollBox,{scrollY:!0,click:!0,bounce:!1,probeType:3}),!this.sideScroll&&this._sideScroll.disable(),this._sideScroll.on("scrollEnd",function(s){s.y>=-3?t.sideReachTop=!0:t.sideReachTop=!1})},_mainScrollEvent:function(){var t=this;this._mainScroll=new d.a(this.$refs.mainScrollBox,{scrollY:!0,click:!0,bounce:!1,probeType:3}),this._mainScroll.on("scroll",function(s){t.$refs.sideScrollBox&&t.goodsListTop.forEach(function(e,i){t.catIndexChange&&Math.abs(Math.round(s.y))>=e&&(t.catIndex=i)})}),this._mainScroll.on("scrollEnd",function(s){s.y>=-3?t.mainReachTop=!0:t.mainReachTop=!1,t.catIndexChange=!0})},_pageTouchListener:function(){var t=this;this.$refs.homePage.addEventListener("touchstart",function(s){t.touchStartX=s.touches[0].pageX,t.touchStartY=s.touches[0].pageY},!!this.$passiveSupported&&{passive:!0}),this.$refs.homePage.addEventListener("touchend",function(s){var e=s.changedTouches[0].pageY;!t.bodyScroll&&e-t.touchStartY>50*f&&t.mainReachTop&&(t.bodyScroll=!0)},!!this.$passiveSupported&&{passive:!0})},deskStatus:function(){var t=this;this.deskId&&this.$http.post(this.API.seller.desk_status,{desk_id:this.deskId}).then(function(s){"0000"===s.return_code&&("2"==s.data.status?t.$router.push("/confirm_pay/"+t.deskId):"3"==s.data.status?t.$router.push("/merchant_confirm/"+t.deskId):"4"==s.data.status||"5"==s.data.status?t.$router.push("/order_detail/dine_detail/"+s.data.order_id):"6"==s.data.status&&t.$router.push("/order_detail/dine_detail/"+s.data.order_id))})}})},v={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"homePage",staticClass:"home-page",style:{visibility:t.showLoading?"hidden":"visible"}},[i("div",{ref:"_100px",staticClass:"_100px"}),t._v(" "),i("div",{staticClass:"fixed-wrapper"},[i("div",{ref:"banner",staticClass:"banner"},[t.storeInf?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.storeInf.bg_image,expression:"storeInf.bg_image"}],staticClass:"bg-image"}):i("img",{staticClass:"bg-image",attrs:{src:e("ewvu")}}),t._v(" "),t.storeInf?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.storeInf.store_log,expression:"storeInf.store_log"}],ref:"logo",staticClass:"logo"}):i("img",{ref:"logo",staticClass:"logo",attrs:{src:e("Qcae")}}),t._v(" "),i("div",{ref:"searchIcon",staticClass:"search-icon"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.blockSearhIocn,expression:"blockSearhIocn"}],staticClass:"block-icon",attrs:{src:e("Puz1")}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.graySearhIocn,expression:"graySearhIocn"}],staticClass:"scroll-show",on:{tap:t.goSearch,click:t.goSearch}},[i("img",{attrs:{src:e("lmx/")}}),t._v(" "),i("span",{style:{visibility:t.graySearhIocn?"visible":"hidden"}},[t._v("有什么想吃的搜一搜")])])])]),t._v(" "),i("div",{ref:"storeInfo",staticClass:"store-info",attrs:{id:"store_info"}},[t.storeInf?i("h3",{staticClass:"store-name"},[t._v("\n        "+t._s(t.storeInf.store_name)+"\n        "),t.operation?i("span",{staticClass:"in-operation"},[t._v("营业中")]):t._e(),t._v(" "),t.operation?t._e():i("span",{staticClass:"resting"},[t._v("暂停营业")])]):t._e(),t._v(" "),i("div",{staticClass:"info01"},[t.storeInf?i("p",{staticClass:"business-hours"},[t._v("\n          营业时间："+t._s(t.storeInf.open_time)+"\n        ")]):t._e(),t._v(" "),t._m(0)])])]),t._v(" "),i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[i("div",{ref:"_wrapper",staticClass:"wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSimulationBtn,expression:"showSimulationBtn"}],staticClass:"search-btn",on:{tap:t.goSearch,click:t.goSearch}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSimulationBtn,expression:"showSimulationBtn"}],staticClass:"store-info-btn",on:{touchstart:function(s){t.showStoreInfo=!0}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSimulationBtn,expression:"!showSimulationBtn"}],staticClass:"search-faker",on:{tap:t.goSearch,click:t.goSearch}}),t._v(" "),i("p",{staticClass:"table-num"},[t.deskInfo&&t.deskInfo.type_name&&t.deskInfo.name?i("span",[t._v("当前："+t._s(t.deskInfo.type_name+" "+t.deskInfo.name))]):t._e()]),t._v(" "),i("div",{ref:"overview",staticClass:"goods-overview"},[i("div",{ref:"sideScrollBox",staticClass:"side scroll-box"},[i("ul",{staticClass:"goods-type-list"},t._l(t.dishes,function(s,a){return i("li",{key:a,staticClass:"type-item",class:{activity_menu:a===t.catIndex},on:{tap:function(s){t.chooseMenu(a)},click:function(s){t.chooseMenu(a)}}},[0===a?i("img",{staticClass:"icon",attrs:{src:e("FyJC")}}):t._e(),t._v(" "),i("span",{staticClass:"txt"},[t._v("\n               "+t._s(s.cat_name)+"\n             ")]),t._v(" "),t.userCart.length>0&&void 0!==t.userCart.cat_list[s.cat_id]?i("span",{staticClass:"category-num"},[t._v(t._s(t.userCart.cat_list[s.cat_id]))]):t._e()])}))]),t._v(" "),i("div",{ref:"mainScrollBox",staticClass:"main scroll-box"},[i("ul",{staticClass:"outside-list"},t._l(t.dishes,function(s){return i("li",{staticClass:"outside-item"},[i("h4",{staticClass:"type-name"},[t._v("\n                "+t._s(s.cat_name)+"\n              ")]),t._v(" "),i("goods",{attrs:{items:s.goods},on:{showSpecs:t.showSpecsList,moveInCart:t.listenInCart,showMoveDot:t.showMoveDotFun,showGoodsDetail:t.showGoodsDetail}})],1)}))])])])]),t._v(" "),i("floating",{attrs:{appending:t.appending}}),t._v(" "),i("mt-popup",{attrs:{position:"bottom"},model:{value:t.specsVisible,callback:function(s){t.specsVisible=s},expression:"specsVisible"}},[i("goods-specification",{attrs:{info:t.specificationInfo},on:{closeSpecs:t.closeSpecsList}})],1),t._v(" "),i("mt-popup",{staticClass:"goods-detail-wrapper",attrs:{position:"center","popup-transition":"popup-fade"},model:{value:t.goodsDetailVisible,callback:function(s){t.goodsDetailVisible=s},expression:"goodsDetailVisible"}},[i("div",{staticClass:"goods-detail"},[i("img",{staticClass:"goods-pic",attrs:{src:t.goodsPic}})])]),t._v(" "),i("store-info",{class:{show_info:t.showStoreInfo},attrs:{"store-info":t.storeInf},on:{close:function(s){t.showStoreInfo=!1}}}),t._v(" "),t._l(t.showMoveDot,function(s,e){return i("transition",{key:e,attrs:{appear:""},on:{"after-appear":t.afterEnter,"before-appear":t.beforeEnter}},[s?i("div",{staticClass:"move-dot"},[i("span",{staticClass:"move-liner"})]):t._e()])})],2)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"introduction-btn"},[this._v("\n          商铺信息 >\n          "),s("i",{staticClass:"fa fa-angle-right"})])}]};var g=e("VU/8")(m,v,!1,function(t){e("bzIW")},"data-v-7115ea5c",null);s.default=g.exports}});
//# sourceMappingURL=12.0aaf5d5a11ef3084c632.js.map