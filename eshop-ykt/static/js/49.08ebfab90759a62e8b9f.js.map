{"version":3,"sources":["webpack:///src/components/my_coupons/applicable_store.vue","webpack:///./src/components/my_coupons/applicable_store.vue?d596","webpack:///./src/components/my_coupons/applicable_store.vue"],"names":["applicable_store","name","components","back","data","cid","this","$route","params","stores","computed","extends_default","Object","vuex_esm","location","state","common","created","getStoreList","mounted","setStyle","methods","document","querySelector","style","height","window","innerHeight","offsetHeight","_this","$myLoading","open","text","spinnerType","$http","post","API","user","coupon_stores","then","res","close","return_code","$myToast","return_msg","list","distance","lat","lng","radLat1","Math","PI","radLat2","point_y","a","b","point_x","s","asin","sqrt","pow","sin","cos","round","my_coupons_applicable_store","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","length","_l","store","store_name","latitude","longitude","addr","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"kKAmBAA,GACAC,KAAA,mBACAC,YACAC,eAAA,GAEAC,KALA,WAMA,OACAC,IAAAC,KAAAC,OAAAC,OAAAH,IACAI,YAGAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EACAE,SAAA,SAAAC,GAAA,OAAAA,EAAAC,OAAAF,aAGAG,QAhBA,WAiBAX,KAAAY,gBAEAC,QAnBA,WAoBAb,KAAAc,YAEAC,SACAD,SADA,WAEAE,SAAAC,cAAA,mBAAAC,MAAAC,OAAAC,OAAAC,YAAAL,SAAAC,cAAA,SAAAK,aAAA,MAEAV,aAJA,WAIA,IAAAW,EAAAvB,KACAA,KAAAwB,WAAAC,MAAAC,KAAA,SAAAC,YAAA,kBACA3B,KAAA4B,MAAAC,KAAA7B,KAAA8B,IAAAC,KAAAC,eAAAjC,IAAAC,KAAAD,MAAAkC,KAAA,SAAAC,GAEA,GADAX,EAAAC,WAAAW,QACA,SAAAD,EAAAE,YAIA,OADAb,EAAAc,SAAAH,EAAAI,aACA,EAHAf,EAAApB,OAAA+B,EAAApC,KAAAyC,QAOAC,SAhBA,SAgBAC,EAAAC,GACA,IAAAC,EAAAF,EAAAG,KAAAC,GAAA,IACAC,EAAA9C,KAAAQ,SAAAuC,QAAAH,KAAAC,GAAA,IACAG,EAAAL,EAAAG,EACAG,EAAAP,EAAAE,KAAAC,GAAA,IAAA7C,KAAAQ,SAAA0C,QAAAN,KAAAC,GAAA,IACAM,EAAA,EAAAP,KAAAQ,KAAAR,KAAAS,KAAAT,KAAAU,IAAAV,KAAAW,IAAAP,EAAA,MACAJ,KAAAY,IAAAb,GAAAC,KAAAY,IAAAV,GAAAF,KAAAU,IAAAV,KAAAW,IAAAN,EAAA,QAGA,OAFAE,GAAA,UACAA,EAAAP,KAAAa,MAAA,IAAAN,IACA,IAAAP,KAAAa,MAAAN,EAAA,UAAAA,EAAA,OC/DAO,GADiBC,OAFjB,WAA0B,IAAAC,EAAA5D,KAAa6D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,SAAmBL,EAAAM,GAAA,IAAAN,EAAAO,GAAAP,EAAAzD,OAAAiE,QAAA,SAAAR,EAAAM,GAAA,KAAAH,EAAA,OAAsEE,YAAA,kBAA6BL,EAAAS,GAAAT,EAAA,gBAAAU,GAAqC,OAAAP,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,MAAgBF,EAAA,QAAaE,YAAA,SAAmBL,EAAAM,GAAAN,EAAAO,GAAAG,EAAAC,eAAAX,EAAAM,GAAA,KAAAH,EAAA,QAA4DE,YAAA,aAAuBL,EAAAM,GAAAN,EAAAO,GAAAP,EAAApB,SAAA8B,EAAAE,SAAAF,EAAAG,iBAAAb,EAAAM,GAAA,KAAAH,EAAA,OAAyFE,YAAA,MAAgBL,EAAAM,GAAAN,EAAAO,GAAAG,EAAAI,cAAiCd,EAAAM,GAAA,KAAAH,EAAA,aAE5lBY,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACApF,EACAgE,GATA,EAVA,SAAAqB,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/49.08ebfab90759a62e8b9f.js","sourcesContent":["<template>\r\n  <div class=\"store-list-page\">\r\n    <div class=\"head\">共{{stores.length}}家门店</div>\r\n    <div class=\"scroll-wrapper\">\r\n      <div class=\"store\" v-for=\"(store) in stores\">\r\n        <div class=\"t\">\r\n          <span class=\"name\">{{store.store_name}}</span>\r\n          <span class=\"distance\">{{distance(store.latitude,store.longitude)}}</span>\r\n        </div>\r\n        <div class=\"b\">{{store.addr}}</div>\r\n      </div>\r\n    </div>\r\n    <back></back>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState} from 'vuex'\r\n  import back from '../../base/back'\r\n  export default {\r\n    name: \"applicable_store\",\r\n    components: {\r\n      back\r\n    },\r\n    data () {\r\n      return {\r\n        cid: this.$route.params.cid,\r\n        stores: []\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        location: state => state.common.location\r\n      })\r\n    },\r\n    created () {\r\n      this.getStoreList()\r\n    },\r\n    mounted () {\r\n      this.setStyle()\r\n    },\r\n    methods: {\r\n      setStyle () {\r\n        document.querySelector('.scroll-wrapper').style.height = window.innerHeight - document.querySelector('.head').offsetHeight + 'px'\r\n      },\r\n      getStoreList () {\r\n        this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\r\n        this.$http.post(this.API.user.coupon_stores, {cid:this.cid}).then(res => {\r\n          this.$myLoading.close()\r\n          if (res.return_code === '0000') {\r\n            this.stores = res.data.list\r\n          } else {\r\n            this.$myToast(res.return_msg)\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      distance (lat,lng) {\r\n        var radLat1 = lat * Math.PI / 180.0\r\n        var radLat2 = this.location.point_y * Math.PI / 180.0\r\n        var a = radLat1 - radLat2\r\n        var b = lng * Math.PI / 180.0 - this.location.point_x * Math.PI / 180.0\r\n        var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2) +\r\n          Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b/2),2)))\r\n        s = s * 6378.137\r\n        s = Math.round(s * 10000)\r\n        return s > 10000 ? Math.round(s / 10000) + '公里' : s + '米'\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .store-list-page{\r\n    position: relative;\r\n    background-color: rgb(242,242,245);\r\n    z-index: 9;\r\n    height: 100%;\r\n    .head{\r\n      padding: 30px;\r\n      font-size: 24px;/*px*/\r\n    }\r\n    .scroll-wrapper{\r\n      overflow-y: scroll;\r\n      -webkit-overflow-scrolling: touch;\r\n      .store{\r\n        padding: 40px 30px;\r\n        margin-bottom: 10px;\r\n        background-color: #ffffff;\r\n        .t{\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: 30px;\r\n          .distance{\r\n            font-size: 24px;/*px*/\r\n            color: #999999;\r\n          }\r\n        }\r\n        .b{\r\n          font-size: 24px;/*px*/\r\n          color: #999999;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/my_coupons/applicable_store.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"store-list-page\"},[_c('div',{staticClass:\"head\"},[_vm._v(\"共\"+_vm._s(_vm.stores.length)+\"家门店\")]),_vm._v(\" \"),_c('div',{staticClass:\"scroll-wrapper\"},_vm._l((_vm.stores),function(store){return _c('div',{staticClass:\"store\"},[_c('div',{staticClass:\"t\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(store.store_name))]),_vm._v(\" \"),_c('span',{staticClass:\"distance\"},[_vm._v(_vm._s(_vm.distance(store.latitude,store.longitude)))])]),_vm._v(\" \"),_c('div',{staticClass:\"b\"},[_vm._v(_vm._s(store.addr))])])})),_vm._v(\" \"),_c('back')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-721095b5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/my_coupons/applicable_store.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-721095b5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./applicable_store.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./applicable_store.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./applicable_store.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-721095b5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./applicable_store.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-721095b5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/my_coupons/applicable_store.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}