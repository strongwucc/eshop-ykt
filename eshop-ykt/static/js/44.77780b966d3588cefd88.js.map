{"version":3,"sources":["webpack:///src/components/bind_card/bind_card.vue","webpack:///./src/components/bind_card/bind_card.vue?aa55","webpack:///./src/components/bind_card/bind_card.vue"],"names":["name","data","cardNo","cvv2","password","tipInfo","icon","txt","loading","warnTip","mappingId","components","MyToast","toast","back","mounted","_this2","this","get_time","$nextTick","window","kb","keyBoard","chaosMode","pressStatus","kbType","svg","generate","passGuard1","passGuard","mappurl","maxLength","regExp1","regExp2","displayMode","callBack","cb1","errorCallBack","cb2","rsaPublicKey","methods","beHide","bool","confirm","type","getValid","_this","external__jQuery__default","a","ajax","url","async","success","ranKey","console","log","setRandKey","getOutput","document","getElementById","value","i","Le","attr","PH","arrPlace","cardPayViewVisible","$myLoading","open","text","spinnerType","$http","post","API","user","bind_card","card_no","key","then","res","close","return_code","$router","go","$myToast","return_msg","Date","getTime","toString","bind_card_bind_card","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","for","_v","directives","rawName","expression","id","placeholder","domProps","on","input","$event","target","composing","maxlength","click","visible","options","hideToast","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/44.77780b966d3588cefd88.js","sourcesContent":["<template>\n  <div class=\"bind-card-page\">\n    <div class=\"input-box reset-pw\">\n      <label for=\"cardNo\">卡号</label>\n      <input type=\"tel\" id=\"cardNo\" v-model=\"cardNo\" placeholder=\"请输入卡号\"/>\n    </div>\n    <div class=\"input-box reset-pw\">\n      <label for=\"cardNo\">cvv2</label>\n      <input type=\"tel\" id=\"cvv2\" v-model=\"cvv2\" placeholder=\"请输入cvv2\"/>\n    </div>\n    <div class=\"input-box confirm-pw\">\n      <label for=\"kb1\">支付密码</label>\n      <input type=\"tel\" maxlength=\"6\" id=\"kb1\" v-model=\"password\" placeholder=\"请输入卡密码\"/>\n    </div>\n    <button class=\"confirm\" @click=\"confirm\">绑卡</button>\n    <back></back>\n    <my-toast :visible=\"warnTip\" :options=\"tipInfo\" @hideToast=\"beHide\" class=\"customize-toast\"></my-toast>\n  </div>\n</template>\n\n<script>\n  import MyToast from '../../base/toast'\n  import Valid from '../../utils/valid'\n  import Encrypt from \"../../assets/js/encrypt/encrypt\"\n  import back from '../../base/back'\n  import $ from 'jquery'\n\n  export default {\n    name: \"bind_card\",\n    data () {\n      return {\n        cardNo: '',\n        cvv2: '',\n        password: '',\n        tipInfo: {\n          icon: '',\n          txt: ''\n        },\n        loading: false,\n        warnTip: false,\n        mappingId: ''\n      }\n    },\n    components: {\n      MyToast,\n      back\n    },\n    mounted () {\n      this.mappingId = this.get_time()\n      this.$nextTick(() => {\n        window.kb = new keyBoard({\n          \"chaosMode\" : 0,// 混乱模式,0:无混乱;1:打开时乱一次;2:每输入一个字符乱一次,默认值0\n          \"pressStatus\" :1,// 按键状态,0:按下、抬起按键无变化;1:按下后有放大镜效果;2:按下、抬起按键的颜色变化,默认值0\n          \"kbType\" : 0,// 键盘类型,0:全键盘;1:纯数字键盘,默认值0\n          \"svg\":\"static/svg\"//svg图片的地址\n        })\n        window.kb.generate()\n        window.passGuard1 = new passGuard({\n          \"mappurl\" : \"http://ceshi4.sdykt.com.cn:1280/pos/card/getMapping/\" + this.mappingId,\n          \"maxLength\" : 8,// 最大输入长度\n          \"regExp1\" : \"[\\\\S\\\\s]\",// 输入过程限制的正则\n          \"regExp2\": \"[0-9]{6,12}\",\n          \"displayMode\" : 0,// 显示形式,0:星号;1:明文,默认值0\n          \"callBack\":this.cb1,//成功回调\n          \"errorCallBack\":this.cb2,//失败回调3081890281810092d9d8d04fb5f8ef9b8374f21690fd46fdbf49b40eeccdf416b4e2ac2044b0cfe3bd67eb4416b26fd18c9d3833770a526fd1ab66a83ed969af74238d6c900403fc498154ec74eaf420e7338675cad7f19332b4a56be4ff946b662a3c2d217efbe4dc646fb742b8c62bfe8e25fd5dc59e7540695fa8b9cd5bfd9f92dfad009d230203010001\n          // \"rsaPublicKey\" : \"3081890281810092d9d8d04fb5f8ef9b8374f21690fd46fdbf49b40eeccdf416b4e2ac2044b0cfe3bd67eb4416b26fd18c9d3833770a526fd1ab66a83ed969af74238d6c900403fc498154ec74eaf420e7338675cad7f19332b4a56be4ff946b662a3c2d217efbe4dc646fb742b8c62bfe8e25fd5dc59e7540695fa8b9cd5bfd9f92dfad009d230203010001\"// rsa公钥\n          \"rsaPublicKey\" : \"30818902818100d17951540859261bcbb00fc61a9e2fb8be1f5794dabd87e87bbac84e975ac7f6f77a094c6b642b3a799bdbdf13841a47943cfb0831578b2e4d82f177b9350e211db3dc84111eb4f0b92bc7d1379436a0f631be371682839461a11d6d2e65cb0c45c526d15429b706ff14498e3fd6c4683ca1092054f5ac95f679ba699fd789d50203010001\"// rsa公钥\n        })\n        window.passGuard1.generate(\"kb1\",window.kb,1)\n      })\n\n    },\n    methods: {\n      beHide (bool) {\n        this.warnTip = bool\n      },\n      confirm () {\n\n        if (!this.cardNo) {\n          this.warnTip = true\n          this.tipInfo = {\n            type: 'warn',\n            txt: '请输入卡号'\n          }\n          return false\n        }\n\n        if (!this.cvv2) {\n          this.warnTip = true\n          this.tipInfo = {\n            type: 'warn',\n            txt: '请输入cvv2'\n          }\n          return false\n        }\n\n        if(window.passGuard1.getValid() == 1){\n          this.warnTip = true\n          this.tipInfo = {\n            type: 'warn',\n            txt: '请输入6位数交易密码'\n          }\n          return false\n        }\n\n        let _this = this\n\n        $.ajax( {\n          url : \"http://ceshi4.sdykt.com.cn:1280/pos/card/getRandkey?\" + this.get_time(),\n          type : \"GET\",\n          async : false,\n          success : function(ranKey) {\n            console.log(ranKey)\n            window.passGuard1.setRandKey(ranKey);\n            let password = window.passGuard1.getOutput()\n            document.getElementById(\"kb1\").value = \"\";\n            //这一段for循环，如果没用必须加上，防止placeholder效果失效。\n            for(var i = 1;i <= Le;i++){\n              $(\"#kb\"+i).attr('placeholder',PH.arrPlace[i-1])\n            }\n            _this.cardPayViewVisible = false\n            console.log(password)\n            _this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\n            _this.loading = true\n            _this.$http.post(_this.API.user.bind_card,{card_no: _this.cardNo, cvv2: _this.cvv2, password: password, key: ranKey, mappingId: _this.mappingId}).then(res => {\n              _this.$myLoading.close()\n              _this.loading = false\n              if (res.return_code === '0000') {\n                _this.$router.go(-1)\n                return true\n              } else {\n                _this.$myToast(res.return_msg)\n                return false\n              }\n            })\n          }\n        })\n\n        // this.$http.post(this.API.user.change_paycode,{cur_code: Encrypt.encrypt(this.nowPw), new_code: Encrypt.encrypt(this.resetPw)}).then(res => {\n        //   if (res.return_code === '0000') {\n        //     this.warnTip = true\n        //     this.tipInfo = {\n        //       type: 'success',\n        //       txt: '修改成功'\n        //     }\n        //     this.$router.go(-1)\n        //     return true\n        //   } else {\n        //     this.warnTip = true\n        //     this.tipInfo = {\n        //       type: 'error',\n        //       txt: res.return_msg\n        //     }\n        //     return false\n        //   }\n        // })\n      },\n      cb1 () {\n        console.log('cb1')\n      },\n      cb2 () {\n        console.log('cb2')\n      },\n      get_time () {\n        return new Date().getTime().toString();\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../assets/css/mixin\";\n  @import \"../../assets/css/common\";\n  .bind-card-page{\n    position: relative;\n    height: 100%;\n    .input-box{\n      position: relative;\n      display: flex;\n      align-items: center;\n      width: 100%;\n      background-color: #ffffff;\n      height: 100px;\n      padding: 0 30px;\n      font-size: 28px;/*px*/\n      label{\n        padding-top: 3px;\n        width: 150px;\n      }\n      input{\n        height: 100px;\n        line-height: 1.5em;\n        vertical-align: middle;\n        font-size: 28px;/*px*/\n\n      }\n      input::-webkit-input-placeholder{\n        color:#bbbbbb;\n        vertical-align: middle;\n      }\n      input::-moz-placeholder{   /* Mozilla Firefox 19+ */\n        color:#bbbbbb;\n        vertical-align: middle;\n      }\n      input:-moz-placeholder{    /* Mozilla Firefox 4 to 18 */\n        color:#bbbbbb;\n\n        vertical-align: middle;\n      }\n      input:-ms-input-placeholder{  /* Internet Explorer 10-11 */\n        color:#bbbbbb;\n      }\n      &:after{\n        @include border-1px(#e5e5e5, bottom);\n      }\n    }\n    .reset-pw{\n      &:before{\n        @include border-1px(#e5e5e5, bottom);\n      }\n    }\n    .tip{\n      line-height: 60px;\n      color: #999999;\n      font-size: 24px;/*px*/\n      padding: 0 30px;\n    }\n    .confirm{\n      display: block;\n      width: 690px;\n      height: 88px;\n      margin: 0 auto;\n      margin-top: 90px;\n      background-color: $themeColor;\n      border-radius: 8px;\n      font-size: 30px;/*px*/\n      color: #333333;\n    }\n    .support{\n      position: absolute;\n      bottom: 0;\n      line-height: 80px;\n      width: 100%;\n      text-align: center;\n      color: #c1c1c1;\n      font-size: 26px;/*px*/\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/bind_card/bind_card.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bind-card-page\"},[_c('div',{staticClass:\"input-box reset-pw\"},[_c('label',{attrs:{\"for\":\"cardNo\"}},[_vm._v(\"卡号\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.cardNo),expression:\"cardNo\"}],attrs:{\"type\":\"tel\",\"id\":\"cardNo\",\"placeholder\":\"请输入卡号\"},domProps:{\"value\":(_vm.cardNo)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.cardNo=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"input-box reset-pw\"},[_c('label',{attrs:{\"for\":\"cardNo\"}},[_vm._v(\"cvv2\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.cvv2),expression:\"cvv2\"}],attrs:{\"type\":\"tel\",\"id\":\"cvv2\",\"placeholder\":\"请输入cvv2\"},domProps:{\"value\":(_vm.cvv2)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.cvv2=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"input-box confirm-pw\"},[_c('label',{attrs:{\"for\":\"kb1\"}},[_vm._v(\"支付密码\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"tel\",\"maxlength\":\"6\",\"id\":\"kb1\",\"placeholder\":\"请输入卡密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})]),_vm._v(\" \"),_c('button',{staticClass:\"confirm\",on:{\"click\":_vm.confirm}},[_vm._v(\"绑卡\")]),_vm._v(\" \"),_c('back'),_vm._v(\" \"),_c('my-toast',{staticClass:\"customize-toast\",attrs:{\"visible\":_vm.warnTip,\"options\":_vm.tipInfo},on:{\"hideToast\":_vm.beHide}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a32e2384\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/bind_card/bind_card.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a32e2384\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./bind_card.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bind_card.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bind_card.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a32e2384\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bind_card.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a32e2384\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/bind_card/bind_card.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}