{"version":3,"sources":["webpack:///src/base/goods_specification.vue","webpack:///./src/base/goods_specification.vue?3060","webpack:///./src/base/goods_specification.vue","webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?c314","webpack:///./src/components/search/search.vue","webpack:///src/base/floating.vue","webpack:///./src/base/floating.vue?5a91","webpack:///./src/base/floating.vue"],"names":["goods_specification","name","data","appending","this","$route","query","dish","adjunctsData","tastesData","showTastesData","adjunctsDataIndex","adjunctNumShow","adjunctNum","tasteSelectedIndex","adjunctSelectedIndex","props","watch","info","value","_this","forEach","item","taste","values","id","getPropName","props_id","push","items","props_value_id","props_name","mounted","$nextTick","computed","extends_default","Object","vuex_esm","adjunctTotal","total","index","price","num","NP","round","methods","wrapperAttr","maxHeight","$refs","goodsSpecification","offsetHeight","headHeight","goodsInfo","specification","wrapper","style","height","close","$emit","prop","propIndex","selectTaste","_this2","existP","existC","existPIndex","existCIndex","pItem","pTasteIndex","cItem","cTasteIndex","splice","children","child","selectAjunct","selectItem","adjuncts","exist","existIndex","adjunctIndex","bn","length","member_price","selectSpec","spec","_this3","checked","product_id","storeId","common","common_data","store_info","store_id","$http","post","API","seller","store_goods_detail","then","res","return_code","assign_default","detail","minusAdjunct","addAdjunct","addCart","_this4","deskId","desk_info","desk_id","goodsBn","product","adjunctData","adjunctItem","adjunct","goods_bn","addUrl","cart","cart_append","cart_add","set_user_cart","user_cart","$myToast","return_msg","base_goods_specification","render","_vm","_h","$createElement","_c","_self","ref","staticClass","on","touchstart","attrs","src","__webpack_require__","_v","image_url","_e","_s","unit","_f","_l","propItem","tasteItem","spec_name","class","selected","click","$event","spec_value","directives","rawName","expression","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","search","searchTxt","dishes","showLoading","specificationInfo","params","peopleNum","bounce","specsVisible","showMoveDot","receiveInCart","windowHeight","standardLength","timer","components","Scroll","base_scroll","Goods","goods","Floating","floating","GoodsSpecification","val","that","clearTimeout","setTimeout","searchDishes","getStyle","setStyle","autoFocus","routerBack","window","history","back","document","querySelector","focus","showSpecsList","goodsItem","innerHeight","_100px","offsetWidth","store_search","list","showMoveDotFun","elLeft","elBottom","concat","toConsumableArray_default","beforeEnter","el","transform","opacity","afterEnter","transition","map","listenInCart","closeSpecsList","emptySearchTxt","search_search","type","placeholder","domProps","input","target","composing","showSpecs","moveInCart","position","model","callback","$$v","closeSpecs","key","appear","after-appear","before-appear","featuresViewVisible","Boolean","default","userCart","state","user","people","totalNum","goods_list","cartItem","parseInt","totalPrice","goodsPrice","adjunctsPrice","adjunct_list","adjunctGoodsItem","created","featuresViewtoggle","goShopCart","$router","base_floating"],"mappings":"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","file":"static/js/16.98db430ac66c2a5f6c11.js","sourcesContent":["<template>\r\n  <div class=\"goods-specification\" ref=\"goodsSpecification\">\r\n    <div class=\"close\" @touchstart=\"close\">\r\n      <img src=\"../assets/img/common/pop_off@2x.png\">\r\n    </div>\r\n    <div class=\"goods-info\" v-if=\"dish\" ref=\"goodsInfo\">\r\n      <div class=\"goods-pic\">\r\n        <img class=\"pic\" v-if=\"dish.image_url\" :src=\"dish.image_url\">\r\n        <img class=\"pic\" v-else src=\"../assets/img/common/goods_img_default_100@2x.png\">\r\n        <img class=\"member-tip\" v-if=\"dish.member_price\" src=\"../assets/img/home/member@2x.png\">\r\n      </div>\r\n      <div class=\"r\">\r\n        <p class=\"name\">\r\n          {{ dish.name }}\r\n          <span class=\"unit\">/{{dish.unit}}</span>\r\n        </p>\r\n        <div class=\"price\">\r\n          <span class=\"finally-price\"><span class=\"money-symbol\">￥</span>{{ dish.member_price | formatActualMoney}}</span>\r\n          <span class=\"original-price\" v-if=\"NP.round(dish.price - dish.member_price) > 0\"><span class=\"money-symbol\">￥</span>{{ dish.price | formatMoney | formatActualMoney}}</span>\r\n        </div>\r\n        <div class=\"have-choose\">\r\n          已选：\r\n          <span>\r\n            <template v-for=\"(propItem, propIndex) in tastesData\">\r\n              <template v-for=\"(tasteItem, index) in propItem.items\">\r\n                {{ tasteItem.props_name }}\r\n                <template v-if=\"index === propItem.items.length - 1\">；</template>\r\n              </template>\r\n            </template>\r\n          </span>\r\n          <span>\r\n            <template v-for=\"(adjunctItem, index) in adjunctsData\">\r\n              {{ adjunctItem.name }}x{{ adjunctItem.num }}\r\n              <template v-if=\"index === adjunctsData.length - 1\">；</template>\r\n              <template v-else>，</template>\r\n            </template>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div  v-if=\"dish\" class=\"wrapper\" ref=\"wrapper\">\r\n      <div class=\"specification\" ref=\"specification\">\r\n        <template v-for=\"(spec) in dish.specs\">\r\n          <div class=\"category\">\r\n            <h4 class=\"title\">{{spec.spec_name}}</h4>\r\n            <ul class=\"parameter-list\">\r\n              <li class=\"parameter\" v-for=\"(item, index) in spec.items\" @click=\"selectSpec(item)\" :class=\"{selected: item.checked == '1'}\">\r\n            <span class=\"txt\">\r\n              {{item.spec_value}}\r\n            </span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </template>\r\n        <template v-for=\"(props) in dish.props\">\r\n          <div class=\"category\">\r\n            <h4 class=\"title\">{{props.name}}</h4>\r\n            <ul class=\"parameter-list\">\r\n              <li class=\"parameter\" v-for=\"(item, index) in props.values\" @click=\"selectTaste(item)\" :class=\"{selected: tasteSelectedIndex[item.id]}\">\r\n            <span class=\"txt\">\r\n              {{item.name}}\r\n            </span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </template>\r\n        <div class=\"category\" v-if=\"dish.adjuncts.length >0\">\r\n          <h4 class=\"title\">配菜</h4>\r\n          <ul class=\"parameter-list\">\r\n            <li class=\"parameter\" v-for=\"(item, index) in dish.adjuncts\" @click=\"selectAjunct(index)\" :class=\"{selected: adjunctSelectedIndex[index]}\">\r\n              <span class=\"txt\">\r\n                {{item.name}}\r\n                <span class=\"price\" v-if=\"!!item.member_price\">￥{{item.member_price}}</span>\r\n              </span>\r\n              <div class=\"selected-num\" v-show=\"adjunctSelectedIndex[index]\">\r\n                {{adjunctSelectedIndex[index]}}\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"filler\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom-assembly\">\r\n      <div class=\"num\" v-show=\"adjunctNumShow\">\r\n        <span class=\"title\">配菜数量</span>\r\n        <div class=\"inputNumber\">\r\n          <i class=\"reduce\" @click=\"minusAdjunct\">\r\n            <img src=\"../assets/img/common/popup_btn_minus@2x.png\">\r\n          </i>\r\n          {{ adjunctNum }}\r\n          <i class=\"add\" @click=\"addAdjunct\">\r\n            <img src=\"../assets/img/common/popup_btn_plus@2x.png\">\r\n          </i>\r\n        </div>\r\n      </div>\r\n      <button class=\"add-cart\" @click=\"addCart\">加入购物车</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState, mapMutations} from 'vuex'\r\n  export default {\r\n    name: \"goods_specification\",\r\n    data () {\r\n      return {\r\n        appending: this.$route.query.appending,\r\n        dish: null,\r\n        adjunctsData: [], // 已选的配菜\r\n        tastesData: [], // 提交的口味数据\r\n        showTastesData: [], // 显示的口味数据\r\n        adjunctsDataIndex: null,\r\n        adjunctNumShow: false, // 配菜数量显示\r\n        adjunctNum: 1, // 配菜数量\r\n        tasteSelectedIndex: [],//高亮已选的口味\r\n        adjunctSelectedIndex: []//高亮已选的配菜\r\n      }\r\n    },\r\n    props: [\r\n      'info'\r\n    ],\r\n    watch: {\r\n      'info': function (value) {\r\n        this.dish = value\r\n        this.adjunctsData = []\r\n        this.tastesData = []\r\n        this.showTastesData = []\r\n        this.adjunctsDataIndex = null\r\n        this.adjunctNumShow = false\r\n        this.adjunctNum = 1\r\n        this.tasteSelectedIndex = []\r\n        this.adjunctSelectedIndex = []\r\n        this.dish.props.forEach((item) => {\r\n          let taste = item.values[0]\r\n          if (taste) {\r\n            this.tasteSelectedIndex[taste.id] = true\r\n            let name = this.getPropName(taste.props_id)\r\n            this.tastesData.push({props_id:taste.props_id,name:name,items:[{props_value_id:taste.id,props_name:taste.name}]})\r\n            this.showTastesData.push({id:taste.id,name:taste.name})\r\n          }\r\n        })\r\n      }\r\n    },\r\n    mounted () {\r\n      this.$nextTick(() => {\r\n        // this.wrapperAttr()\r\n      })\r\n\r\n    },\r\n    computed: {\r\n      ...mapState([\r\n        'common'\r\n      ]),\r\n      adjunctTotal : function () {\r\n        let total = 0\r\n        this.adjunctsData.forEach((item, index) => {\r\n          total += item.price * item.num\r\n        })\r\n        return this.NP.round(total,2)\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations([\r\n        'set_user_cart'\r\n      ]),\r\n      //当规格列表过长时，外层包裹框固定高度，使之可以滚动\r\n      wrapperAttr () {\r\n        if (this.dish) {\r\n          const maxHeight = this.$refs.goodsSpecification.offsetHeight\r\n          const headHeight = this.$refs.goodsInfo.offsetHeight\r\n          const scrollHeight = this.$refs.specification.offsetHeight\r\n          if (scrollHeight > maxHeight - headHeight) {\r\n            this.$refs.wrapper.style.height = maxHeight - headHeight + 'px'\r\n          }\r\n        }\r\n      },\r\n\r\n      close () {\r\n        this.$emit('closeSpecs')\r\n      },\r\n\r\n      getPropName (props_id) {\r\n        let name = ''\r\n        this.dish.props.forEach((prop,propIndex) => {\r\n          if (prop.props_id == props_id) {\r\n            name = prop.name\r\n          }\r\n        })\r\n        return name\r\n      },\r\n\r\n      selectTaste (taste) {\r\n        let existP = false\r\n        let existC = false\r\n        let existPIndex = 0\r\n        let existCIndex = 0\r\n        this.tastesData.forEach((pItem,pTasteIndex) => {\r\n          if (taste.props_id === pItem.props_id) {\r\n            existPIndex = pTasteIndex\r\n            existP = true\r\n            pItem.items.forEach((cItem,cTasteIndex) => {\r\n              if (taste.id === cItem.props_value_id) {\r\n                existC = true\r\n                existCIndex = cTasteIndex\r\n              }\r\n            })\r\n          }\r\n        })\r\n\r\n        if (existC === true) {\r\n          this.tasteSelectedIndex[taste.id] = false\r\n          this.tastesData[existPIndex]['items'].splice(existCIndex,1)\r\n          this.showTastesData.splice(existCIndex,1)\r\n        } else if (existP === true) {\r\n          let children = this.dish.props[existPIndex];\r\n          if (children && children.values) {\r\n            children.values.forEach((child) => {\r\n              if (this.tasteSelectedIndex[child.id]) {\r\n                this.tasteSelectedIndex[child.id] = false\r\n              }\r\n            })\r\n          }\r\n\r\n          this.tastesData[existPIndex]['items'] = []\r\n          this.showTastesData = []\r\n\r\n          this.tasteSelectedIndex[taste.id] = true\r\n          this.tastesData[existPIndex]['items'].push({props_value_id:taste.id,props_name:taste.name})\r\n          this.showTastesData.push({id:taste.id,name:taste.name})\r\n        } else {\r\n          this.tasteSelectedIndex[taste.id] = true\r\n          let name = this.getPropName(taste.props_id)\r\n          this.tastesData.push({props_id:taste.props_id,name:name,items:[{props_value_id:taste.id,props_name:taste.name}]})\r\n          this.showTastesData.push({id:taste.id,name:taste.name})\r\n        }\r\n      },\r\n\r\n      selectAjunct (index) {\r\n        let selectItem = this.dish.adjuncts[index]\r\n        let exist = false\r\n        let existIndex = 0\r\n        this.adjunctsData.forEach((item,adjunctIndex) => {\r\n          if (selectItem.bn === item.bn) {\r\n            exist = true\r\n            existIndex = adjunctIndex\r\n          }\r\n        })\r\n\r\n        if (exist === true) {\r\n          this.adjunctsData[existIndex].num += 1\r\n          this.adjunctsDataIndex = existIndex\r\n          this.adjunctNum = this.adjunctsData[existIndex].num\r\n          this.adjunctSelectedIndex[index] += 1\r\n        } else {\r\n          this.adjunctSelectedIndex[index] = 1\r\n          this.adjunctsDataIndex = this.adjunctsData.length\r\n          this.adjunctNum = 1\r\n          this.adjunctsData.push({bn:selectItem.bn,name:selectItem.name,price:selectItem.member_price,num:1,index:index})\r\n        }\r\n\r\n        this.adjunctNumShow = true;\r\n      },\r\n      selectSpec (spec) {\r\n        if (spec.checked === '1' || spec.product_id === '') {\r\n          return false\r\n        }\r\n        let storeId = this.common.common_data.store_info.store_id\r\n        this.$http.post(this.API.seller.store_goods_detail,{store_id: storeId, product_id: spec.product_id}).then(res => {\r\n          if (res.return_code == '0000') {\r\n            this.dish = Object.assign({}, res.data.detail)\r\n          } else {\r\n\r\n          }\r\n        })\r\n      },\r\n      minusAdjunct () {\r\n        let num = this.adjunctsData[this.adjunctsDataIndex].num\r\n        if (num === 1) {\r\n          this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index] = 0\r\n          this.adjunctsData.splice(this.adjunctsDataIndex,1)\r\n          this.adjunctNumShow = false\r\n          this.adjunctsDataIndex = null\r\n          this.adjunctNum = 1\r\n        } else {\r\n          this.adjunctsData[this.adjunctsDataIndex].num = num - 1\r\n          this.adjunctNum = num - 1\r\n          this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]  = num - 1\r\n        }\r\n      },\r\n      addAdjunct () {\r\n        this.adjunctsData[this.adjunctsDataIndex].num += 1\r\n        this.adjunctNum += 1\r\n        this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index] += 1\r\n      },\r\n      addCart () {\r\n        let storeId = this.common.common_data.store_info.store_id\r\n        let deskId = this.common.common_data.desk_info.desk_id\r\n        let goodsBn = this.dish.product.bn\r\n        let adjunctData = [];\r\n        this.adjunctsData.forEach(adjunctItem => {\r\n          var adjunct = {goods_bn: adjunctItem.bn, num: adjunctItem.num}\r\n          adjunctData.push(adjunct)\r\n        })\r\n\r\n        let addUrl = this.appending === '1' ? this.API.cart.cart_append : this.API.cart.cart_add\r\n        this.$http.post(addUrl,{store_id: storeId, desk_id: deskId, goods_bn: goodsBn, num: 1, taste: this.tastesData, adjunct: adjunctData}).then(res => {\r\n          if (res.return_code === '0000') {\r\n            this.set_user_cart(res.data.user_cart);\r\n            this.$emit('closeSpecs')\r\n          } else {\r\n            this.$myToast(res.return_msg)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import \"../assets/css/mixin\";\r\n  @import \"../assets/css/common\";\r\n  .goods-specification{\r\n    /*max-height: 1100px;*/\r\n    border-top-left-radius: 30px;\r\n    border-top-right-radius: 30px;\r\n    background-color: #ffffff;\r\n    padding: 0 30px;\r\n    ::-webkit-scrollbar {\r\n      display: none;\r\n    }\r\n    .close{\r\n      position: absolute;\r\n      top: 20px;\r\n      right: 20px;\r\n      z-index: 9;\r\n      width: 50px;\r\n      height: 50px;\r\n      img{\r\n        width: 100%;\r\n      }\r\n    }\r\n    .goods-info{\r\n      position: relative;\r\n      padding-top: 45px;\r\n      padding-bottom: 15px;\r\n      display: flex;\r\n      .goods-pic{\r\n        position: relative;\r\n        flex-shrink: 0;\r\n        width: 170px;\r\n        height: 170px;\r\n        border-radius: 8px;\r\n        overflow: hidden;\r\n        .pic{\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n        .member-tip{\r\n          position: absolute;\r\n          width: 50%;\r\n          height: 50%;\r\n          top: 0;\r\n          left: 0;\r\n          z-index: 2;\r\n        }\r\n      }\r\n      .r{\r\n        margin-left: 20px;\r\n        .name{\r\n          font-size: 38px;/*px*/\r\n          font-weight: 600;\r\n          padding-top: 10px;\r\n          .unit{\r\n            font-size: 24px;/*px*/\r\n            font-weight: normal;\r\n            color: #999999;\r\n          }\r\n        }\r\n        .price{\r\n          margin-top: 20px;\r\n          .finally-price{\r\n            font-size: 40px;/*px*/\r\n            color: #ff2e2e;\r\n            font-weight: 600;\r\n          }\r\n\r\n          .original-price{\r\n            font-size: 24px;/*px*/\r\n            color: #999999;\r\n            text-decoration: line-through;\r\n          }\r\n          .other-price{\r\n            margin-left: 30px;\r\n            font-size: 24px;/*px*/\r\n            .total{\r\n              color: #ff2e2e;\r\n              margin-left: -15px;\r\n            }\r\n          }\r\n          .money-symbol{\r\n            font-size: 24px;/*px*/\r\n            transform: scale(0.833);\r\n          }\r\n        }\r\n        .have-choose{\r\n          margin-top: 30px;\r\n          line-height: 1.5;\r\n          font-size: 24px;/*px*/\r\n        }\r\n      }\r\n      &:after{\r\n        @include border-1px(#e5e5e5, bottom);\r\n      }\r\n    }\r\n    .wrapper{\r\n      overflow-y: scroll;\r\n      -webkit-overflow-scrolling : touch;\r\n      height: 800px;\r\n      .specification{\r\n        .title{\r\n          padding: 28px 0;\r\n          font-size: 28px;/*px*/\r\n        }\r\n        .parameter-list{\r\n          display: flex;\r\n          justify-content: flex-start;\r\n          flex-wrap: wrap;\r\n          .parameter{\r\n            position: relative;\r\n            display: flex;\r\n            justify-content: center;\r\n            min-width: 160px;\r\n            height: 60px;\r\n            border: 2px solid #dddddd;\r\n            border-radius: 30px;\r\n            margin-bottom: 30px;\r\n            margin-right: 30px;\r\n            .txt{\r\n              display: block;\r\n              line-height: 60px;\r\n              padding: 0 25px;\r\n              font-size: 26px;\r\n            }\r\n            .selected-num{\r\n              position: absolute;\r\n              width: 38px;\r\n              height: 38px;\r\n              border-radius: 50%;\r\n              line-height: 38px;\r\n              text-align: center;\r\n              font-size: 24px;/*px*/\r\n              transform: scale(0.75);\r\n              top: -14px;\r\n              right: -14px;\r\n              background-color: #ffd726;\r\n            }\r\n          }\r\n        }\r\n        .filler{\r\n          height: 188px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .bottom-assembly{\r\n      position: absolute;\r\n      width: 100%;\r\n      bottom: 0;\r\n      left: 0;\r\n      .num{\r\n        background-color: #ffffff;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        height: 100px;\r\n        padding: 0 30px;\r\n        .title{\r\n          font-size: 28px;/*px*/\r\n        }\r\n        .inputNumber{\r\n          display: flex;\r\n          justify-content: space-between;\r\n          width: 185px;\r\n          height: 50px;\r\n          background-color: #f7f7f7;\r\n          line-height: 50px;\r\n          text-align: center;\r\n          font-size: 28px;/*px*/\r\n          border-radius: 25px;\r\n          i{\r\n            width: 50px;\r\n            height: 50px;\r\n            background-color: #ffffff;\r\n            border-radius: 50%;\r\n            img{\r\n              width: 100%;\r\n              height: 100%;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .add-cart{\r\n        width: 100%;\r\n        height: 88px;\r\n        background-color: $themeColor;\r\n        font-size: 30px;/*px*/\r\n      }\r\n      &:after{\r\n        @include border-1px(#e5e5e5, top);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  .selected{\r\n    background-color: #fff6ce!important;\r\n    border: 2px solid #ffd726!important;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/goods_specification.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"goodsSpecification\",staticClass:\"goods-specification\"},[_c('div',{staticClass:\"close\",on:{\"touchstart\":_vm.close}},[_c('img',{attrs:{\"src\":require(\"../assets/img/common/pop_off@2x.png\")}})]),_vm._v(\" \"),(_vm.dish)?_c('div',{ref:\"goodsInfo\",staticClass:\"goods-info\"},[_c('div',{staticClass:\"goods-pic\"},[(_vm.dish.image_url)?_c('img',{staticClass:\"pic\",attrs:{\"src\":_vm.dish.image_url}}):_c('img',{staticClass:\"pic\",attrs:{\"src\":require(\"../assets/img/common/goods_img_default_100@2x.png\")}}),_vm._v(\" \"),(_vm.dish.member_price)?_c('img',{staticClass:\"member-tip\",attrs:{\"src\":require(\"../assets/img/home/member@2x.png\")}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"r\"},[_c('p',{staticClass:\"name\"},[_vm._v(\"\\n        \"+_vm._s(_vm.dish.name)+\"\\n        \"),_c('span',{staticClass:\"unit\"},[_vm._v(\"/\"+_vm._s(_vm.dish.unit))])]),_vm._v(\" \"),_c('div',{staticClass:\"price\"},[_c('span',{staticClass:\"finally-price\"},[_c('span',{staticClass:\"money-symbol\"},[_vm._v(\"￥\")]),_vm._v(_vm._s(_vm._f(\"formatActualMoney\")(_vm.dish.member_price)))]),_vm._v(\" \"),(_vm.NP.round(_vm.dish.price - _vm.dish.member_price) > 0)?_c('span',{staticClass:\"original-price\"},[_c('span',{staticClass:\"money-symbol\"},[_vm._v(\"￥\")]),_vm._v(_vm._s(_vm._f(\"formatActualMoney\")(_vm._f(\"formatMoney\")(_vm.dish.price))))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"have-choose\"},[_vm._v(\"\\n        已选：\\n        \"),_c('span',[_vm._l((_vm.tastesData),function(propItem,propIndex){return [_vm._l((propItem.items),function(tasteItem,index){return [_vm._v(\"\\n              \"+_vm._s(tasteItem.props_name)+\"\\n              \"),(index === propItem.items.length - 1)?[_vm._v(\"；\")]:_vm._e()]})]})],2),_vm._v(\" \"),_c('span',[_vm._l((_vm.adjunctsData),function(adjunctItem,index){return [_vm._v(\"\\n            \"+_vm._s(adjunctItem.name)+\"x\"+_vm._s(adjunctItem.num)+\"\\n            \"),(index === _vm.adjunctsData.length - 1)?[_vm._v(\"；\")]:[_vm._v(\"，\")]]})],2)])])]):_vm._e(),_vm._v(\" \"),(_vm.dish)?_c('div',{ref:\"wrapper\",staticClass:\"wrapper\"},[_c('div',{ref:\"specification\",staticClass:\"specification\"},[_vm._l((_vm.dish.specs),function(spec){return [_c('div',{staticClass:\"category\"},[_c('h4',{staticClass:\"title\"},[_vm._v(_vm._s(spec.spec_name))]),_vm._v(\" \"),_c('ul',{staticClass:\"parameter-list\"},_vm._l((spec.items),function(item,index){return _c('li',{staticClass:\"parameter\",class:{selected: item.checked == '1'},on:{\"click\":function($event){_vm.selectSpec(item)}}},[_c('span',{staticClass:\"txt\"},[_vm._v(\"\\n            \"+_vm._s(item.spec_value)+\"\\n          \")])])}))])]}),_vm._v(\" \"),_vm._l((_vm.dish.props),function(props){return [_c('div',{staticClass:\"category\"},[_c('h4',{staticClass:\"title\"},[_vm._v(_vm._s(props.name))]),_vm._v(\" \"),_c('ul',{staticClass:\"parameter-list\"},_vm._l((props.values),function(item,index){return _c('li',{staticClass:\"parameter\",class:{selected: _vm.tasteSelectedIndex[item.id]},on:{\"click\":function($event){_vm.selectTaste(item)}}},[_c('span',{staticClass:\"txt\"},[_vm._v(\"\\n            \"+_vm._s(item.name)+\"\\n          \")])])}))])]}),_vm._v(\" \"),(_vm.dish.adjuncts.length >0)?_c('div',{staticClass:\"category\"},[_c('h4',{staticClass:\"title\"},[_vm._v(\"配菜\")]),_vm._v(\" \"),_c('ul',{staticClass:\"parameter-list\"},_vm._l((_vm.dish.adjuncts),function(item,index){return _c('li',{staticClass:\"parameter\",class:{selected: _vm.adjunctSelectedIndex[index]},on:{\"click\":function($event){_vm.selectAjunct(index)}}},[_c('span',{staticClass:\"txt\"},[_vm._v(\"\\n              \"+_vm._s(item.name)+\"\\n              \"),(!!item.member_price)?_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(item.member_price))]):_vm._e()]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.adjunctSelectedIndex[index]),expression:\"adjunctSelectedIndex[index]\"}],staticClass:\"selected-num\"},[_vm._v(\"\\n              \"+_vm._s(_vm.adjunctSelectedIndex[index])+\"\\n            \")])])}))]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"filler\"})],2)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"bottom-assembly\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.adjunctNumShow),expression:\"adjunctNumShow\"}],staticClass:\"num\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"配菜数量\")]),_vm._v(\" \"),_c('div',{staticClass:\"inputNumber\"},[_c('i',{staticClass:\"reduce\",on:{\"click\":_vm.minusAdjunct}},[_c('img',{attrs:{\"src\":require(\"../assets/img/common/popup_btn_minus@2x.png\")}})]),_vm._v(\"\\n        \"+_vm._s(_vm.adjunctNum)+\"\\n        \"),_c('i',{staticClass:\"add\",on:{\"click\":_vm.addAdjunct}},[_c('img',{attrs:{\"src\":require(\"../assets/img/common/popup_btn_plus@2x.png\")}})])])]),_vm._v(\" \"),_c('button',{staticClass:\"add-cart\",on:{\"click\":_vm.addCart}},[_vm._v(\"加入购物车\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7231fe29\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/goods_specification.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7231fe29\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./goods_specification.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./goods_specification.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./goods_specification.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7231fe29\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./goods_specification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7231fe29\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/goods_specification.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"search-page\">\r\n    <div class=\"_100px\" ref=\"_100px\"></div>\r\n    <div class=\"head\">\r\n      <div class=\"search-wrapper\">\r\n        <img src=\"../../assets/img/home/icon_search@2x.png\">\r\n        <input class=\"search-input\" type=\"text\" v-model=\"searchTxt\" placeholder=\"想吃什么搜一下吧\" />\r\n        <img v-if=\"searchTxt\" src=\"../../assets/img/common/icon_off@2x.png\" @click=\"emptySearchTxt\">\r\n      </div>\r\n      <div class=\"cancel\" @click=\"routerBack\">取消</div>\r\n    </div>\r\n    <scroll class=\"scroll-wrapper\"\r\n            :data=\"dishes\"\r\n            :bounce=\"bounce\" v-if=\"dishes.length > 0\">\r\n      <div class=\"wrapper\">\r\n        <goods :items=\"dishes\" @showSpecs=\"showSpecsList\"  @moveInCart=\"listenInCart\" @showMoveDot=\"showMoveDotFun\"></goods>\r\n        <div class=\"fill\">\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </scroll>\r\n    <div class=\"no-dish\" v-else>\r\n      <img src=\"../../assets/img/home/img_search@2x.png\">\r\n      <p>暂时没有找到商品哦~</p>\r\n      <p>换个关键词试试~</p>\r\n    </div>\r\n\r\n    <floating></floating>\r\n    <mt-popup\r\n      v-model=\"specsVisible\"\r\n      position=\"bottom\">\r\n      <goods-specification :info=\"specificationInfo\" @closeSpecs=\"closeSpecsList\"></goods-specification>\r\n    </mt-popup>\r\n\r\n    <transition\r\n      appear\r\n      @after-appear = 'afterEnter'\r\n      @before-appear=\"beforeEnter\"\r\n      v-for=\"(item,index) in showMoveDot\"\r\n      :key=\"index\"\r\n    >\r\n      <div class=\"move-dot\" v-if=\"item\">\r\n        <span class=\"move-liner\"></span>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Goods from '../../base/goods'\r\n  import Scroll from '../../base/scroll'\r\n  import Floating from '../../base/floating'\r\n  import GoodsSpecification from '../../base/goods_specification'\r\n\r\n  export default {\r\n    name: \"search\",\r\n    data () {\r\n      return {\r\n        searchTxt: '',//搜索内容\r\n        dishes: [],\r\n        showLoading: false,\r\n        specificationInfo: [], // 商品规格页信息\r\n        storeId: this.$route.params.storeId, //门店ID\r\n        deskId: this.$route.params.deskId, //桌台ID\r\n        peopleNum: this.$route.params.peopleNum, //就餐人数\r\n        bounce: false, //禁止滚动列表回弹效果\r\n        specsVisible: false, //弹出商品规格菜单\r\n        showMoveDot: [], // 控制下落的小圆点显示隐藏\r\n        receiveInCart: false, // 购物车组件下落的圆点是否到达目标位置\r\n        windowHeight: 0,\r\n        standardLength: 0,//标准长度(注意：是dpr为2时的长度)\r\n        timer: null\r\n      }\r\n    },\r\n\r\n    components: {\r\n      Scroll,\r\n      Goods,\r\n      Floating,\r\n      GoodsSpecification\r\n    },\r\n\r\n    watch: {\r\n      searchTxt: function (val) {\r\n        if (val) {\r\n          let that = this\r\n          clearTimeout(this.timer)\r\n          this.timer = setTimeout(() => {\r\n            that.searchDishes()\r\n          }, 500)\r\n        } else {\r\n          clearTimeout(this.timer)\r\n          this.dishes = []\r\n        }\r\n      }\r\n    },\r\n\r\n    mounted () {\r\n      this.getStyle()\r\n      this.setStyle()\r\n      // this.getStoreTastes()\r\n      // this.getStoreAdjuncts()\r\n      this.autoFocus()\r\n    },\r\n    methods: {\r\n      routerBack () {\r\n        window.history.back(-1)\r\n      },\r\n      autoFocus () {\r\n        setTimeout(() => {\r\n          document.querySelector('.search-input').focus()\r\n        }, 100)\r\n      },\r\n      showSpecsList (goodsItem) {\r\n        this.$http.post(this.API.seller.store_goods_detail,{store_id: this.storeId, product_id: goodsItem.product.product_id}).then(res => {\r\n          if (res.return_code == '0000') {\r\n            this.specsVisible = true\r\n            this.specificationInfo = res.data.detail\r\n          } else {\r\n\r\n          }\r\n        })\r\n      },\r\n\r\n      setStyle () {\r\n        if (document.querySelector('.scroll-wrapper')) {\r\n          document.querySelector('.scroll-wrapper').style.height = window.innerHeight - document.querySelector('.head').offsetHeight + 'px'\r\n        }\r\n      },\r\n      getStyle () {\r\n        this.windowHeight = window.innerHeight\r\n        this.standardLength = this.$refs._100px.offsetWidth\r\n      },\r\n\r\n      //获取商品\r\n      searchDishes () {\r\n        // 获取商铺食品列表\r\n        this.showLoading = true\r\n\r\n        this.$http.post(this.API.seller.store_search,{store_id: this.storeId, name: this.searchTxt}).then(res => {\r\n          if (res.return_code === '0000') {\r\n\r\n            this.dishes = res.data.list\r\n            this.showLoading = false\r\n          } else {\r\n            this.$myToast(res.return_msg)\r\n            this.showLoading = false\r\n            return\r\n          }\r\n        });\r\n      },\r\n\r\n      // 显示下落圆球\r\n      showMoveDotFun (showMoveDot, elLeft, elBottom) {\r\n        this.showMoveDot = [...this.showMoveDot, ...showMoveDot]\r\n        this.elLeft = elLeft\r\n        this.elBottom = elBottom\r\n      },\r\n      beforeEnter (el) {\r\n        el.style.transform = `translate3d(0,${this.elBottom - this.windowHeight}px,0)`\r\n        el.children[0].style.transform = `translate3d(${this.elLeft - this.standardLength * 0.4}px,0,0)`\r\n        el.children[0].style.opacity = 0\r\n      },\r\n      afterEnter (el) {\r\n        el.style.transform = `translate3d(0,0,0)`\r\n        el.children[0].style.transform = `translate3d(0,0,0)`\r\n        el.style.transition = 'transform .5s cubic-bezier(0.3, -0.1, 0.7, -0.15)'\r\n        el.children[0].style.transition = 'transform .5s linear'\r\n        this.showMoveDot = this.showMoveDot.map(item => false)\r\n        el.children[0].style.opacity = 1\r\n        // el.children[0].addEventListener('transitionend', () => {\r\n        //   this.listenInCart()\r\n        // })\r\n        // el.children[0].addEventListener('webkitAnimationEnd', () => {\r\n        //   this.listenInCart()\r\n        // })\r\n      },\r\n      // 监听圆点是否进入购物车\r\n      listenInCart () {\r\n        if (!this.receiveInCart) {\r\n          this.receiveInCart = true\r\n          // this.$refs.cartContainer.addEventListener('animationend', () => {\r\n          //   this.receiveInCart = false\r\n          // })\r\n          // this.$refs.cartContainer.addEventListener('webkitAnimationEnd', () => {\r\n          //   this.receiveInCart = false\r\n          // })\r\n        }\r\n      },\r\n      //关闭商品规格\r\n      closeSpecsList () {\r\n        this.specsVisible = false\r\n      },\r\n      emptySearchTxt () {\r\n        this.searchTxt = ''\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .search-page{\r\n    position: relative;\r\n    height: 100%;\r\n    background-color: rgb(242,242,245);\r\n    z-index: 9;\r\n    .head{\r\n      position: relative;\r\n      z-index: 9;\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 25px 30px;\r\n      background-color: #ffffff;\r\n      .search-wrapper{\r\n        flex-grow: 1;\r\n        display: flex;\r\n        align-items: center;\r\n        height: 70px;\r\n        background-color: #eeeeee;\r\n        border-radius: 8px;\r\n        img{\r\n          width: 34px;\r\n          margin: 0 14px;\r\n        }\r\n        input{\r\n          flex-grow: 1;\r\n          background-color: #eeeeee;\r\n        }\r\n        input::-webkit-input-placeholder{\r\n          color:#bbbbbb;\r\n        }\r\n        input::-moz-placeholder{   /* Mozilla Firefox 19+ */\r\n          color:#bbbbbb;\r\n        }\r\n        input:-moz-placeholder{    /* Mozilla Firefox 4 to 18 */\r\n          color:#bbbbbb;\r\n        }\r\n        input:-ms-input-placeholder{  /* Internet Explorer 10-11 */\r\n          color:#bbbbbb;\r\n        }\r\n      }\r\n      .cancel{\r\n        padding-left: 30px;\r\n        height: 70px;\r\n        line-height: 70px;\r\n      }\r\n    }\r\n    .scroll-wrapper{\r\n      .wrapper{\r\n        padding: 0 30px;\r\n        background-color: #ffffff;\r\n        .fill{\r\n          position: relative;\r\n          height: 158px;\r\n          div{\r\n            position: absolute;\r\n            top: 0;\r\n            left: -50px;\r\n            width: 130%;\r\n            height: 100%;\r\n            background-color: rgb(242,242,245);\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n    .no-dish {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate3d(-50%, -50%, 0);\r\n      img{\r\n        width: 256px;\r\n        margin-bottom: 75px;\r\n      }\r\n      p{\r\n        text-align: center;\r\n        color: #bbbbbb;\r\n      }\r\n    }\r\n    .mint-popup{\r\n      width: 100%;\r\n    }\r\n    .move-dot{\r\n      position: fixed;\r\n      z-index: 98;\r\n      left: 300px;\r\n      bottom: 67px;\r\n      .move-liner{\r\n        display: block;\r\n        width: 28px;\r\n        height: 28px;\r\n        border-radius: 50%;\r\n        background-color: #ff2e2e;\r\n      }\r\n    }\r\n\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-page\"},[_c('div',{ref:\"_100px\",staticClass:\"_100px\"}),_vm._v(\" \"),_c('div',{staticClass:\"head\"},[_c('div',{staticClass:\"search-wrapper\"},[_c('img',{attrs:{\"src\":require(\"../../assets/img/home/icon_search@2x.png\")}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchTxt),expression:\"searchTxt\"}],staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"想吃什么搜一下吧\"},domProps:{\"value\":(_vm.searchTxt)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchTxt=$event.target.value}}}),_vm._v(\" \"),(_vm.searchTxt)?_c('img',{attrs:{\"src\":require(\"../../assets/img/common/icon_off@2x.png\")},on:{\"click\":_vm.emptySearchTxt}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"cancel\",on:{\"click\":_vm.routerBack}},[_vm._v(\"取消\")])]),_vm._v(\" \"),(_vm.dishes.length > 0)?_c('scroll',{staticClass:\"scroll-wrapper\",attrs:{\"data\":_vm.dishes,\"bounce\":_vm.bounce}},[_c('div',{staticClass:\"wrapper\"},[_c('goods',{attrs:{\"items\":_vm.dishes},on:{\"showSpecs\":_vm.showSpecsList,\"moveInCart\":_vm.listenInCart,\"showMoveDot\":_vm.showMoveDotFun}}),_vm._v(\" \"),_c('div',{staticClass:\"fill\"},[_c('div')])],1)]):_c('div',{staticClass:\"no-dish\"},[_c('img',{attrs:{\"src\":require(\"../../assets/img/home/img_search@2x.png\")}}),_vm._v(\" \"),_c('p',[_vm._v(\"暂时没有找到商品哦~\")]),_vm._v(\" \"),_c('p',[_vm._v(\"换个关键词试试~\")])]),_vm._v(\" \"),_c('floating'),_vm._v(\" \"),_c('mt-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.specsVisible),callback:function ($$v) {_vm.specsVisible=$$v},expression:\"specsVisible\"}},[_c('goods-specification',{attrs:{\"info\":_vm.specificationInfo},on:{\"closeSpecs\":_vm.closeSpecsList}})],1),_vm._v(\" \"),_vm._l((_vm.showMoveDot),function(item,index){return _c('transition',{key:index,attrs:{\"appear\":\"\"},on:{\"after-appear\":_vm.afterEnter,\"before-appear\":_vm.beforeEnter}},[(item)?_c('div',{staticClass:\"move-dot\"},[_c('span',{staticClass:\"move-liner\"})]):_vm._e()])})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16e3bb82\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16e3bb82\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16e3bb82\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-16e3bb82\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"floating-box\">\r\n    <div class=\"features\">\r\n      <div class=\"title\" @click=\"featuresViewtoggle\">\r\n        <img class=\"icon\" src=\"../assets/img/home/icon_function@2x.png\">\r\n        功能\r\n      </div>\r\n      <ul class=\"list\" v-show=\"featuresViewVisible\">\r\n        <!--<li @click=\"$router.push({name: 'store', params: {storeId: storeId, deskId: deskId, people}})\">点餐首页</li>-->\r\n        <li @click=\"$router.push('/center')\">会员中心</li>\r\n        <li @click=\"$router.push('/my_order/dine')\">我的订单</li>\r\n        <li @click=\"$router.push('/my_coupons')\">我的优惠券</li>\r\n        <li @click=\"$router.push('/shop_cart')\">购物车</li>\r\n        <li v-if=\"appending\" @click=\"$router.push({name: 'confirm_pay', params: {deskId: deskId}})\">结账</li>\r\n      </ul>\r\n    </div>\r\n\r\n    <div class=\"shopping-cart\" @click=\"goShopCart\">\r\n      <div class=\"circle\" ref=\"cartContainer\">\r\n        <div class=\"num\" v-if=\"totalNum\">{{totalNum}}</div>\r\n      </div>\r\n      <p class=\"total\">￥<span>{{totalPrice | formatActualMoney}}</span></p>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState, mapMutations} from 'vuex'\r\n\r\n  export default {\r\n    name: \"floating\",\r\n    data () {\r\n      return {\r\n        featuresViewVisible: false,//显示功能列表\r\n      }\r\n    },\r\n\r\n    props: {\r\n      appending: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        userCart: state => state.user.user_cart,\r\n        deskId: state => state.common.common_data.desk_info.desk_id,\r\n        storeId: state => state.common.common_data.store_info.store_id,\r\n        people: state => state.common.common_data.desk_info.info.people,\r\n      }),\r\n      // 购物车中总共商品的数量\r\n      totalNum: function () {\r\n        let num = 0\r\n        if (this.userCart.goods_list) {\r\n          this.userCart.goods_list.forEach(cartItem => {\r\n            num += parseInt(cartItem.num)\r\n          })\r\n        }\r\n        return num\r\n      },\r\n\r\n      //商品总金额\r\n      totalPrice: function () {\r\n        let goodsPrice = 0\r\n        let adjunctsPrice = 0\r\n\r\n        if (this.userCart.goods_list) {\r\n          this.userCart.goods_list.forEach(goodsItem => {\r\n            goodsPrice += goodsItem.num * goodsItem.price\r\n          })\r\n        }\r\n\r\n        if (this.userCart.adjunct_list) {\r\n          let adjunctIndex;\r\n          for (adjunctIndex in this.userCart.adjunct_list) {\r\n            this.userCart.adjunct_list[adjunctIndex].forEach(adjunctGoodsItem => {\r\n              adjunctGoodsItem.forEach(adjunctItem => {\r\n                adjunctsPrice += adjunctItem.num * adjunctItem.price\r\n              })\r\n            })\r\n          }\r\n        }\r\n\r\n        let price = this.NP.round(goodsPrice + adjunctsPrice,2)\r\n        return price\r\n      }\r\n    },\r\n    created () {\r\n    },\r\n\r\n    methods: {\r\n      //功能菜单显示\r\n      featuresViewtoggle () {\r\n        this.featuresViewVisible = !this.featuresViewVisible\r\n      },\r\n\r\n      goShopCart () {\r\n        if (this.appending) {\r\n          this.$router.push('/shop_cart?appending=1')\r\n        } else {\r\n          this.$router.push('/shop_cart')\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .floating-box{\r\n    display: flex;\r\n    position: fixed;\r\n    left: 30px;\r\n    bottom: 40px;\r\n    z-index: 99;\r\n    .features{\r\n      position: relative;\r\n      .title{\r\n        position: relative;\r\n        z-index: 9;\r\n        display: flex;\r\n        width: 180px;\r\n        height: 88px;\r\n        background-color: rgba(51,51,51,.9);\r\n        border-radius: 44px;\r\n        justify-content: center;\r\n        align-items: center;\r\n        font-size: 28px;/*px*/\r\n        color: #ffffff;\r\n        .icon{\r\n          width: 40px;\r\n          margin-right: 6px;\r\n        }\r\n      }\r\n      .list{\r\n        position: absolute;\r\n        left: 0;\r\n        bottom: 0;\r\n        padding-bottom: 88px;\r\n        li{\r\n          width: 180px;\r\n          height: 88px;\r\n          border-radius: 44px;\r\n          background-color: rgba(70,70,70,.8);\r\n          font-size: 26px;/*px*/\r\n          color: #ffffff;\r\n          margin-bottom: 10px;\r\n          text-align: center;\r\n          line-height: 88px;\r\n        }\r\n      }\r\n    }\r\n    .shopping-cart{\r\n      display: flex;\r\n      align-items: center;\r\n      width: 250px;\r\n      height: 88px;\r\n      margin-left: 64px;\r\n      border-radius: 44px;\r\n      background-color: rgba(255,215,59,.9);\r\n      .circle{\r\n        flex-shrink: 0;\r\n        position: relative;\r\n        width: 82px;\r\n        height: 82px;\r\n        border-radius: 50%;\r\n        background: url(\"../assets/img/home/icon_cart@2x.png\") no-repeat;\r\n        background-size: 100% 100%;\r\n        .num {\r\n          position: absolute;\r\n          top: 4px;\r\n          left: 38px;\r\n          width: 38px;\r\n          height: 38px;\r\n          background-color: #ff2e2e;\r\n          border-radius: 50%;\r\n          font-size: 24px;/*px*/\r\n          color: #ffffff;\r\n          text-align: center;\r\n          line-height: 38px;\r\n          transform: scale(0.75);\r\n        }\r\n      }\r\n      .total{\r\n        flex-grow: 1;\r\n        text-align: center;\r\n        font-size: 24px;/*px*/\r\n        span{\r\n          font-size: 36px;/*px*/\r\n          font-weight: 700;\r\n          color: #333333;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/floating.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"floating-box\"},[_c('div',{staticClass:\"features\"},[_c('div',{staticClass:\"title\",on:{\"click\":_vm.featuresViewtoggle}},[_c('img',{staticClass:\"icon\",attrs:{\"src\":require(\"../assets/img/home/icon_function@2x.png\")}}),_vm._v(\"\\n      功能\\n    \")]),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.featuresViewVisible),expression:\"featuresViewVisible\"}],staticClass:\"list\"},[_c('li',{on:{\"click\":function($event){_vm.$router.push('/center')}}},[_vm._v(\"会员中心\")]),_vm._v(\" \"),_c('li',{on:{\"click\":function($event){_vm.$router.push('/my_order/dine')}}},[_vm._v(\"我的订单\")]),_vm._v(\" \"),_c('li',{on:{\"click\":function($event){_vm.$router.push('/my_coupons')}}},[_vm._v(\"我的优惠券\")]),_vm._v(\" \"),_c('li',{on:{\"click\":function($event){_vm.$router.push('/shop_cart')}}},[_vm._v(\"购物车\")]),_vm._v(\" \"),(_vm.appending)?_c('li',{on:{\"click\":function($event){_vm.$router.push({name: 'confirm_pay', params: {deskId: _vm.deskId}})}}},[_vm._v(\"结账\")]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"shopping-cart\",on:{\"click\":_vm.goShopCart}},[_c('div',{ref:\"cartContainer\",staticClass:\"circle\"},[(_vm.totalNum)?_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.totalNum))]):_vm._e()]),_vm._v(\" \"),_c('p',{staticClass:\"total\"},[_vm._v(\"￥\"),_c('span',[_vm._v(_vm._s(_vm._f(\"formatActualMoney\")(_vm.totalPrice)))])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-be508818\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/floating.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-be508818\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./floating.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./floating.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./floating.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-be508818\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./floating.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-be508818\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/floating.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}