webpackJsonp([37],{GJjj:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAMCAYAAABr5z2BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcwMzY4ODQwOUY4MjExRTg4NkRGOEI1QUIwRDMwRTdEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcwMzY4ODQxOUY4MjExRTg4NkRGOEI1QUIwRDMwRTdEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzAzNjg4M0U5RjgyMTFFODg2REY4QjVBQjBEMzBFN0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzAzNjg4M0Y5RjgyMTFFODg2REY4QjVBQjBEMzBFN0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6eW7CBAAAA9klEQVR42pzSr2sCcRjH8dNzYnDahvgPmMSgZRgWBoJBgximglgNNsP+gOFgVcFokGHSIIggIibBvLpoETGsTlDfDzzC4S88D14cd9/7fHm+z3OOWDRi3HH5McTWeUfYjR6e5cEMBgN2wibaSOEXCbsV1PGGFZJyt7PBO8r4w6tWYMgG32jBdSUswRr+kcHPYUFCUYTwgKJ09iic1tLlfR4T66JUkMACBTTgsKy/oKPNq6B70lWmIGcaaHMk4MEYYYzwiA98nR2LjnGtH+e0QV584glNVC/O1fIfLDHVc0olPvRRwu6WDQztxQxxzJHF5tps9wIMAG9mK29zLVoLAAAAAElFTkSuQmCC"},RTQz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),o=s("NYxO"),r={name:"people_num",data:function(){return{storeId:this.$route.params.storeId,deskId:this.$route.params.deskId,storeInfo:[],remarks:"",selectedIndex:"",peopleNum:[1,2,3,4,5,6,7,8,9,10,11],morePeople:"更多",moreViewVisible:!1,inputNum:"",inputNumPlaceholder:"请输入就餐人数",openStatus:!1,deskStatusTimer:null}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.getStoreInfo()})},destroyed:function(){},beforeDestroy:function(){clearInterval(this.deskStatusTimer)},methods:a()({},Object(o.b)(["set_user_cart","set_common_data_store_info","set_common_data_desk_info"]),{getStoreInfo:function(){var t=this;this.$http.post(this.API.seller.store_info,{store_id:this.storeId,desk_id:this.deskId}).then(function(e){"0000"==e.return_code?(t.storeInfo=e.data.store,t.set_user_cart(e.data.user_cart),t.set_common_data_store_info(e.data.store),t.set_common_data_desk_info(e.data.desk),"1"==e.data.desk.status?t.$router.push("/store/"+t.storeId+"/"+t.deskId+"/"+e.data.desk.info.people):"2"==e.data.desk.status?t.$router.push("/confirm_pay/"+t.deskId):"3"==e.data.desk.status?t.$router.push("/merchant_confirm/"+t.deskId):"4"==e.data.desk.status||"5"==e.data.desk.status?t.$router.push("/order_detail/dine_detail/"+e.data.desk.info.order_id):"6"==e.data.desk.status?t.clearDesk():t.deskStatusTimer=setInterval(t.deskStatus,5e3)):t.$myToast(e.return_msg)})},selectNum:function(t){this.selectedIndex=t,this.inputNum=this.peopleNum[t]},cancelInput:function(){this.moreViewVisible=!1,this.selectedIndex="",this.inputNum="",this.morePeople="更多"},confirmInput:function(){parseInt(this.inputNum)>11?(this.moreViewVisible=!1,this.selectedIndex=12,this.morePeople=this.inputNum+"人"):(this.inputNum="",this.inputNumPlaceholder="请输入大于11的数字")},goShopping:function(){var t=this;if(0==this.openStatus){var e=this.storeId,s=this.deskId,i=this.inputNum;if(!i)return this.$myToast("请选择就餐人数"),!1;this.$http.post(this.API.seller.store_opend,{store_id:e,desk_id:s,people:i,mark_text:this.remarks}).then(function(e){if("0000"===e.return_code){t.openStatus=!0;var s=t.$store.state.common.common_data.desk_info,a={people:i};s.info=a,t.set_common_data_desk_info(s),t.$router.push("/store/"+t.storeId+"/"+t.deskId+"/"+t.inputNum)}else t.$router.replace("/error/请您联系服务员")}).catch(function(t){})}},deskStatus:function(){var t=this;this.deskId&&this.$http.post(this.API.seller.desk_status,{desk_id:this.deskId}).then(function(e){"0000"===e.return_code&&("1"==e.data.status?t.$router.push("/store/"+t.storeId+"/"+t.deskId+"/"+e.data.people):"2"==e.data.status?t.$router.push("/confirm_pay/"+t.deskId):"3"==e.data.status?t.$router.push("/merchant_confirm/"+t.deskId):"4"==e.data.status||"5"==e.data.status?t.$router.push("/order_detail/dine_detail/"+e.data.order_id):"6"==e.data.status&&t.$router.push("/order_detail/dine_detail/"+e.data.order_id))})},clearDesk:function(){var t=this;this.deskId&&this.$http.post(this.API.seller.desk_init,{desk_id:this.deskId}).then(function(e){"0000"===e.return_code?t.$router.push("/store/"+t.storeId+"/"+t.deskId+"/"+e.data.people):t.$router.replace("/error/哎呀！出错啦，请重新扫码")})}})},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"peopleNumPage",staticClass:"people-num-page"},[i("div",{staticClass:"banner"},[i("div",{staticClass:"mask"},[i("div",{staticClass:"icon"},[i("i"),t._v(" "),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.storeInfo.store_log,expression:"storeInfo.store_log"}]}),t._v(" "),i("i")]),t._v(" "),i("p",{staticClass:"store-name"},[t._v(t._s(t.storeInfo.store_name))])])]),t._v(" "),i("div",{staticClass:"main"},[i("h4",{staticClass:"title"},[t._v("请选择就餐人数")]),t._v(" "),i("ul",{staticClass:"choose-list"},[t._l(t.peopleNum,function(e,a){return i("li",{staticClass:"num",on:{click:function(e){t.selectNum(a)}}},[t._v("\n        "+t._s(e)+"人\n        "),a===t.selectedIndex?i("div",{staticClass:"selected"},[i("img",{attrs:{src:s("GJjj")}}),t._v(" "),i("div",{staticClass:"bg-color"})]):t._e()])}),t._v(" "),i("li",{staticClass:"more",on:{click:function(e){t.moreViewVisible=!0}}},[t._v("\n        "+t._s(t.morePeople)+"\n        "),12===t.selectedIndex?i("div",{staticClass:"selected"},[i("img",{attrs:{src:s("GJjj")}}),t._v(" "),i("div",{staticClass:"bg-color"})]):t._e()])],2),t._v(" "),i("div",{staticClass:"remarks"},[i("label",{attrs:{for:"_remarks"}},[t._v("备注：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],attrs:{type:"text",id:"_remarks",placeholder:"口味要求、忌口等(可不填)"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"confirm"},[i("button",{on:{click:t.goShopping}},[t._v("开始点餐")])])]),t._v(" "),i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.moreViewVisible,callback:function(e){t.moreViewVisible=e},expression:"moreViewVisible"}},[i("div",{staticClass:"more-view"},[i("h4",{staticClass:"title"},[t._v("输入人数")]),t._v(" "),i("div",{staticClass:"input-num"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputNum,expression:"inputNum"}],attrs:{type:"tel",placeholder:t.inputNumPlaceholder},domProps:{value:t.inputNum},on:{input:function(e){e.target.composing||(t.inputNum=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"btn"},[i("button",{staticClass:"cancel",on:{click:t.cancelInput}},[t._v("取消")]),t._v(" "),i("button",{staticClass:"confirm",on:{click:t.confirmInput}},[t._v("确定")])])])])],1)},staticRenderFns:[]};var d=s("VU/8")(r,n,!1,function(t){s("l19w")},"data-v-3cf2b0bb",null);e.default=d.exports},l19w:function(t,e){}});
//# sourceMappingURL=37.3ed14a37a34ba0eb7ab8.js.map