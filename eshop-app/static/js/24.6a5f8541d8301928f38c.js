webpackJsonp([24],{JriI:function(t,e){},YOyO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Gu7T"),o=s.n(i),n=s("HR77"),r=s("Ewld"),a=s("vyE0"),c=s("LV3v"),u={name:"search",data:function(){return{searchTxt:"",dishes:[],showLoading:!1,specificationInfo:[],storeId:this.$route.params.storeId,deskId:this.$route.params.deskId,peopleNum:this.$route.params.peopleNum,bounce:!1,specsVisible:!1,showMoveDot:[],receiveInCart:!1,windowHeight:0,standardLength:0,timer:null}},components:{Scroll:r.a,Goods:n.a,Floating:a.a,GoodsSpecification:c.a},watch:{searchTxt:function(t){if(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.searchDishes()},500)}else clearTimeout(this.timer),this.dishes=[]}},mounted:function(){this.getStyle(),this.setStyle(),this.autoFocus()},methods:{routerBack:function(){window.history.back(-1)},autoFocus:function(){setTimeout(function(){document.querySelector(".search-input").focus()},100)},showSpecsList:function(t){var e=this;this.$http.post(this.API.seller.store_goods_detail,{store_id:this.storeId,product_id:t.product.product_id}).then(function(t){"0000"==t.return_code&&(e.specsVisible=!0,e.specificationInfo=t.data.detail)})},setStyle:function(){document.querySelector(".scroll-wrapper")&&(document.querySelector(".scroll-wrapper").style.height=window.innerHeight-document.querySelector(".head").offsetHeight+"px")},getStyle:function(){this.windowHeight=window.innerHeight,this.standardLength=this.$refs._100px.offsetWidth},searchDishes:function(){var t=this;this.showLoading=!0,this.$http.post(this.API.seller.store_search,{store_id:this.storeId,name:this.searchTxt}).then(function(e){if("0000"!==e.return_code)return t.$myToast(e.return_msg),void(t.showLoading=!1);t.dishes=e.data.list,t.showLoading=!1})},showMoveDotFun:function(t,e,s){this.showMoveDot=[].concat(o()(this.showMoveDot),o()(t)),this.elLeft=e,this.elBottom=s},beforeEnter:function(t){t.style.transform="translate3d(0,"+(this.elBottom-this.windowHeight)+"px,0)",t.children[0].style.transform="translate3d("+(this.elLeft-.4*this.standardLength)+"px,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){t.style.transform="translate3d(0,0,0)",t.children[0].style.transform="translate3d(0,0,0)",t.style.transition="transform .5s cubic-bezier(0.3, -0.1, 0.7, -0.15)",t.children[0].style.transition="transform .5s linear",this.showMoveDot=this.showMoveDot.map(function(t){return!1}),t.children[0].style.opacity=1},listenInCart:function(){this.receiveInCart||(this.receiveInCart=!0)},closeSpecsList:function(){this.specsVisible=!1},emptySearchTxt:function(){this.searchTxt=""}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-page"},[i("div",{ref:"_100px",staticClass:"_100px"}),t._v(" "),i("div",{staticClass:"head"},[i("div",{staticClass:"search-wrapper"},[i("img",{attrs:{src:s("Puz1")}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTxt,expression:"searchTxt"}],staticClass:"search-input",attrs:{type:"text",placeholder:"想吃什么搜一下吧"},domProps:{value:t.searchTxt},on:{input:function(e){e.target.composing||(t.searchTxt=e.target.value)}}}),t._v(" "),t.searchTxt?i("img",{attrs:{src:s("j33x")},on:{click:t.emptySearchTxt}}):t._e()]),t._v(" "),i("div",{staticClass:"cancel",on:{click:t.routerBack}},[t._v("取消")])]),t._v(" "),t.dishes.length>0?i("scroll",{staticClass:"scroll-wrapper",attrs:{data:t.dishes,bounce:t.bounce}},[i("div",{staticClass:"wrapper"},[i("goods",{attrs:{items:t.dishes},on:{showSpecs:t.showSpecsList,moveInCart:t.listenInCart,showMoveDot:t.showMoveDotFun}}),t._v(" "),i("div",{staticClass:"fill"},[i("div")])],1)]):i("div",{staticClass:"no-dish"},[i("img",{attrs:{src:s("0Pde")}}),t._v(" "),i("p",[t._v("暂时没有找到商品哦~")]),t._v(" "),i("p",[t._v("换个关键词试试~")])]),t._v(" "),i("floating"),t._v(" "),i("mt-popup",{attrs:{position:"bottom"},model:{value:t.specsVisible,callback:function(e){t.specsVisible=e},expression:"specsVisible"}},[i("goods-specification",{attrs:{info:t.specificationInfo},on:{closeSpecs:t.closeSpecsList}})],1),t._v(" "),t._l(t.showMoveDot,function(e,s){return i("transition",{key:s,attrs:{appear:""},on:{"after-appear":t.afterEnter,"before-appear":t.beforeEnter}},[e?i("div",{staticClass:"move-dot"},[i("span",{staticClass:"move-liner"})]):t._e()])})],2)},staticRenderFns:[]};var h=s("VU/8")(u,l,!1,function(t){s("JriI")},"data-v-9038cddc",null);e.default=h.exports},ZM25:function(t,e){},vyE0:function(t,e,s){"use strict";var i=s("Dd8w"),o=s.n(i),n=s("NYxO"),r={name:"floating",data:function(){return{featuresViewVisible:!1}},props:{appending:{type:Boolean,default:!1}},computed:o()({},Object(n.c)({userCart:function(t){return t.user.user_cart},deskId:function(t){return t.common.common_data.desk_info.desk_id},storeId:function(t){return t.common.common_data.store_info.store_id},people:function(t){return t.common.common_data.desk_info.info.people}}),{totalNum:function(){var t=0;return this.userCart.goods_list&&this.userCart.goods_list.forEach(function(e){t+=parseInt(e.num)}),t},totalPrice:function(){var t=0,e=0;if(this.userCart.goods_list&&this.userCart.goods_list.forEach(function(e){t+=e.num*e.price}),this.userCart.adjunct_list){var s=void 0;for(s in this.userCart.adjunct_list)this.userCart.adjunct_list[s].forEach(function(t){t.forEach(function(t){e+=t.num*t.price})})}return this.NP.round(t+e,2)}}),created:function(){},methods:{featuresViewtoggle:function(){this.featuresViewVisible=!this.featuresViewVisible},goShopCart:function(){this.appending?this.$router.push("/shop_cart?appending=1"):this.$router.push("/shop_cart")}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"floating-box"},[i("div",{staticClass:"features"},[i("div",{staticClass:"title",on:{click:t.featuresViewtoggle}},[i("img",{staticClass:"icon",attrs:{src:s("DHIp")}}),t._v("\n      功能\n    ")]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.featuresViewVisible,expression:"featuresViewVisible"}],staticClass:"list"},[i("li",{on:{click:function(e){t.$router.push("/center")}}},[t._v("会员中心")]),t._v(" "),i("li",{on:{click:function(e){t.$router.push("/my_order/dine")}}},[t._v("我的订单")]),t._v(" "),i("li",{on:{click:function(e){t.$router.push("/my_coupons")}}},[t._v("我的优惠券")]),t._v(" "),i("li",{on:{click:function(e){t.$router.push("/shop_cart")}}},[t._v("购物车")]),t._v(" "),t.appending?i("li",{on:{click:function(e){t.$router.push({name:"confirm_pay",params:{deskId:t.deskId}})}}},[t._v("结账")]):t._e()])]),t._v(" "),i("div",{staticClass:"shopping-cart",on:{click:t.goShopCart}},[i("div",{ref:"cartContainer",staticClass:"circle"},[t.totalNum?i("div",{staticClass:"num"},[t._v(t._s(t.totalNum))]):t._e()]),t._v(" "),i("p",{staticClass:"total"},[t._v("￥"),i("span",[t._v(t._s(t._f("formatActualMoney")(t.totalPrice)))])])])])},staticRenderFns:[]};var c=s("VU/8")(r,a,!1,function(t){s("ZM25")},"data-v-06a875d0",null);e.a=c.exports}});
//# sourceMappingURL=24.6a5f8541d8301928f38c.js.map