webpackJsonp([47],{b7mB:function(e,t){},v65O:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("GJzV"),r=(o("NYxO"),o("VUa8")),s=o("uaSg"),n={name:"step01",data:function(){return{nowTel:"",veriCode:"",grapCode:"",wait60s:!1,second:60,tipInfo:{icon:"",txt:""},warnTip:!1,verifyErrorCount:0,vcode:s.c+"index.php/index-gen_vcode-b2c-4.html",grapCodeCheckSend:!1,grapCodeCheckSuccess:!1,posting:!1}},components:{MyToast:i.a},watch:{grapCode:function(e){var t=this;4!==e.length||this.grapCodeCheckSend||this.grapCodeCheckSuccess||(this.grapCodeCheckSend=!0,this.$http.post(this.API.auth.check_grap_code,{code:this.grapCode}).then(function(e){if(t.grapCodeCheckSend=!1,"0000"!==e.return_code)return t.warnTip=!0,t.tipInfo={type:"error",txt:"验证码错误"},!1;t.grapCodeCheckSuccess=!0}))}},methods:{beHide:function(e){this.warnTip=e},sendCode:function(){var e=this;this.$http.post(this.API.auth.mobile_code,{phoneNumber:this.nowTel,type:"reset_pw"}).then(function(t){if(e.$myLoading.close(),e.posting=!1,"0000"!==t.return_code)return e.warnTip=!0,void(e.tipInfo={type:"error",txt:t.return_msg});e.verifyErrorCount+=1;var o=e;o.wait60s=!0;var i=setInterval(function(){o.second-=1,0===o.second&&(clearInterval(i),o.wait60s=!1,o.second=60)},1e3)})},getVeriCode:function(){var e=this;if(!(this.verifyErrorCount>=3)||this.grapCodeCheckSuccess)return r.a.check_mobile(this.nowTel)?void(!0!==this.posting&&(this.$myLoading.open({text:"加载中...",spinnerType:"fading-circle"}),this.posting=!0,this.$http.post(this.API.auth.reset_mobile_exist,{phoneNumber:this.nowTel}).then(function(t){if("0000"!==t.return_code)return e.$myLoading.close(),e.posting=!1,e.warnTip=!0,e.tipInfo={type:"error",txt:"该手机账号不存在"},!1;e.sendCode()}))):(this.warnTip=!0,void(this.tipInfo={type:"error",txt:"请输入正确的手机号"}))},nextStep:function(){var e=this;this.$http.post(this.API.auth.check_mobile_code,{phoneNumber:this.nowTel,type:"reset_pw",code:this.veriCode}).then(function(t){if("0000"!==t.return_code)return e.verifyErrorCount+=1,e.warnTip=!0,void(e.tipInfo={type:"error",txt:t.return_msg});e.$router.push("/reset_pw/step02")})},vcodeRefresh:function(){var e=Math.random();this.vcode=s.c+"index.php/index-gen_vcode-b2c-4.html?i="+e}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step01-page"},[i("div",{staticClass:"input-box now-tel"},[i("label",{attrs:{for:"now_tel"}},[e._v("当前账号")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.nowTel,expression:"nowTel"}],attrs:{type:"tel",id:"now_tel",placeholder:"请输入当前手机号"},domProps:{value:e.nowTel},on:{input:function(t){t.target.composing||(e.nowTel=t.target.value)}}})]),e._v(" "),e.verifyErrorCount>=3?i("div",{staticClass:"input-box graphic-code"},[i("label",{attrs:{for:"graphic_code"}},[e._v("验证码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.grapCode,expression:"grapCode"}],attrs:{type:"text",id:"graphic_code",placeholder:"请输入图形验证码"},domProps:{value:e.grapCode},on:{input:function(t){t.target.composing||(e.grapCode=t.target.value)}}}),e._v(" "),i("div",{staticClass:"graphic"},[e.grapCodeCheckSuccess?e._e():i("img",{staticClass:"code",attrs:{alt:"验证码",src:e.vcode},on:{click:e.vcodeRefresh}}),e._v(" "),e.grapCodeCheckSuccess?i("div",{staticClass:"success"},[i("img",{attrs:{src:o("j1tw")}})]):e._e()])]):e._e(),e._v(" "),i("div",{staticClass:"input-box veri-code"},[i("label",{attrs:{for:"veri_code"}},[e._v("验证码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.veriCode,expression:"veriCode"}],attrs:{type:"tel",id:"veri_code",maxlength:"6",placeholder:"请输入验证码"},domProps:{value:e.veriCode},on:{input:function(t){t.target.composing||(e.veriCode=t.target.value)}}}),e._v(" "),i("div",{staticClass:"get-veri-code"},[e.wait60s?e._e():i("button",{style:{backgroundColor:e.verifyErrorCount>=3&&!e.grapCodeCheckSuccess?"#e5e5e5":"#ffe169"},on:{click:e.getVeriCode}},[e._v("获取验证码")]),e._v(" "),e.wait60s?i("div",{staticClass:"_60s"},[e._v(e._s(e.second)+"s后重发")]):e._e()])]),e._v(" "),i("button",{staticClass:"confirm",on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),i("p",{staticClass:"support"},[e._v("易通金服提供支持")]),e._v(" "),i("my-toast",{staticClass:"customize-toast",attrs:{visible:e.warnTip,options:e.tipInfo},on:{hideToast:e.beHide}})],1)},staticRenderFns:[]};var c=o("VU/8")(n,a,!1,function(e){o("b7mB")},"data-v-3bfd6040",null);t.default=c.exports}});
//# sourceMappingURL=47.8e97038944633897f316.js.map