{"version":3,"sources":["webpack:///src/components/my_coupons/applicable_store.vue","webpack:///./src/components/my_coupons/applicable_store.vue?4653","webpack:///./src/components/my_coupons/applicable_store.vue"],"names":["applicable_store","name","data","cid","this","$route","params","stores","computed","extends_default","Object","vuex_esm","location","state","common","created","getStoreList","mounted","setStyle","methods","document","querySelector","style","height","window","innerHeight","offsetHeight","_this","$myLoading","open","text","spinnerType","$http","post","API","user","coupon_stores","then","res","close","return_code","$myToast","return_msg","list","distance","lat","lng","radLat1","Math","PI","radLat2","point_y","a","b","point_x","s","asin","sqrt","pow","sin","cos","round","my_coupons_applicable_store","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","length","_l","store","store_name","latitude","longitude","addr","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"kKAiBAA,GACAC,KAAA,mBACAC,KAFA,WAGA,OACAC,IAAAC,KAAAC,OAAAC,OAAAH,IACAI,YAGAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EACAE,SAAA,SAAAC,GAAA,OAAAA,EAAAC,OAAAF,aAGAG,QAbA,WAcAX,KAAAY,gBAEAC,QAhBA,WAiBAb,KAAAc,YAEAC,SACAD,SADA,WAEAE,SAAAC,cAAA,mBAAAC,MAAAC,OAAAC,OAAAC,YAAAL,SAAAC,cAAA,SAAAK,aAAA,MAEAV,aAJA,WAIA,IAAAW,EAAAvB,KACAA,KAAAwB,WAAAC,MAAAC,KAAA,SAAAC,YAAA,kBACA3B,KAAA4B,MAAAC,KAAA7B,KAAA8B,IAAAC,KAAAC,eAAAjC,IAAAC,KAAAD,MAAAkC,KAAA,SAAAC,GAEA,GADAX,EAAAC,WAAAW,QACA,SAAAD,EAAAE,YAIA,OADAb,EAAAc,SAAAH,EAAAI,aACA,EAHAf,EAAApB,OAAA+B,EAAApC,KAAAyC,QAOAC,SAhBA,SAgBAC,EAAAC,GACA,IAAAC,EAAAF,EAAAG,KAAAC,GAAA,IACAC,EAAA9C,KAAAQ,SAAAuC,QAAAH,KAAAC,GAAA,IACAG,EAAAL,EAAAG,EACAG,EAAAP,EAAAE,KAAAC,GAAA,IAAA7C,KAAAQ,SAAA0C,QAAAN,KAAAC,GAAA,IACAM,EAAA,EAAAP,KAAAQ,KAAAR,KAAAS,KAAAT,KAAAU,IAAAV,KAAAW,IAAAP,EAAA,MACAJ,KAAAY,IAAAb,GAAAC,KAAAY,IAAAV,GAAAF,KAAAU,IAAAV,KAAAW,IAAAN,EAAA,QAGA,OAFAE,GAAA,UACAA,EAAAP,KAAAa,MAAA,IAAAN,IACA,IAAAP,KAAAa,MAAAN,EAAA,UAAAA,EAAA,OC1DAO,GADiBC,OAFjB,WAA0B,IAAAC,EAAA5D,KAAa6D,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,SAAmBL,EAAAM,GAAA,IAAAN,EAAAO,GAAAP,EAAAzD,OAAAiE,QAAA,SAAAR,EAAAM,GAAA,KAAAH,EAAA,OAAsEE,YAAA,kBAA6BL,EAAAS,GAAAT,EAAA,gBAAAU,GAAqC,OAAAP,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,MAAgBF,EAAA,QAAaE,YAAA,SAAmBL,EAAAM,GAAAN,EAAAO,GAAAG,EAAAC,eAAAX,EAAAM,GAAA,KAAAH,EAAA,QAA4DE,YAAA,aAAuBL,EAAAM,GAAAN,EAAAO,GAAAP,EAAApB,SAAA8B,EAAAE,SAAAF,EAAAG,iBAAAb,EAAAM,GAAA,KAAAH,EAAA,OAAyFE,YAAA,MAAgBL,EAAAM,GAAAN,EAAAO,GAAAG,EAAAI,iBAE3jBC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAlF,EACA8D,GATA,EAVA,SAAAqB,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/44.06065c6145e1e2a53cec.js","sourcesContent":["<template>\n  <div class=\"store-list-page\">\n    <div class=\"head\">共{{stores.length}}家门店</div>\n    <div class=\"scroll-wrapper\">\n      <div class=\"store\" v-for=\"(store) in stores\">\n        <div class=\"t\">\n          <span class=\"name\">{{store.store_name}}</span>\n          <span class=\"distance\">{{distance(store.latitude,store.longitude)}}</span>\n        </div>\n        <div class=\"b\">{{store.addr}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {mapState} from 'vuex'\n  export default {\n    name: \"applicable_store\",\n    data () {\n      return {\n        cid: this.$route.params.cid,\n        stores: []\n      }\n    },\n    computed: {\n      ...mapState({\n        location: state => state.common.location\n      })\n    },\n    created () {\n      this.getStoreList()\n    },\n    mounted () {\n      this.setStyle()\n    },\n    methods: {\n      setStyle () {\n        document.querySelector('.scroll-wrapper').style.height = window.innerHeight - document.querySelector('.head').offsetHeight + 'px'\n      },\n      getStoreList () {\n        this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\n        this.$http.post(this.API.user.coupon_stores, {cid:this.cid}).then(res => {\n          this.$myLoading.close()\n          if (res.return_code === '0000') {\n            this.stores = res.data.list\n          } else {\n            this.$myToast(res.return_msg)\n            return false\n          }\n        })\n      },\n      distance (lat,lng) {\n        var radLat1 = lat * Math.PI / 180.0\n        var radLat2 = this.location.point_y * Math.PI / 180.0\n        var a = radLat1 - radLat2\n        var b = lng * Math.PI / 180.0 - this.location.point_x * Math.PI / 180.0\n        var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2) +\n          Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b/2),2)))\n        s = s * 6378.137\n        s = Math.round(s * 10000)\n        return s > 10000 ? Math.round(s / 10000) + '公里' : s + '米'\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .store-list-page{\n    position: relative;\n    background-color: rgb(242,242,245);\n    z-index: 9;\n    height: 100%;\n    .head{\n      padding: 30px;\n      font-size: 24px;/*px*/\n    }\n    .scroll-wrapper{\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n      .store{\n        padding: 40px 30px;\n        margin-bottom: 10px;\n        background-color: #ffffff;\n        .t{\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 30px;\n          .distance{\n            font-size: 24px;/*px*/\n            color: #999999;\n          }\n        }\n        .b{\n          font-size: 24px;/*px*/\n          color: #999999;\n        }\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/my_coupons/applicable_store.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"store-list-page\"},[_c('div',{staticClass:\"head\"},[_vm._v(\"共\"+_vm._s(_vm.stores.length)+\"家门店\")]),_vm._v(\" \"),_c('div',{staticClass:\"scroll-wrapper\"},_vm._l((_vm.stores),function(store){return _c('div',{staticClass:\"store\"},[_c('div',{staticClass:\"t\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(store.store_name))]),_vm._v(\" \"),_c('span',{staticClass:\"distance\"},[_vm._v(_vm._s(_vm.distance(store.latitude,store.longitude)))])]),_vm._v(\" \"),_c('div',{staticClass:\"b\"},[_vm._v(_vm._s(store.addr))])])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41e8fa6a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/my_coupons/applicable_store.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41e8fa6a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./applicable_store.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./applicable_store.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./applicable_store.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41e8fa6a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./applicable_store.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41e8fa6a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/my_coupons/applicable_store.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}