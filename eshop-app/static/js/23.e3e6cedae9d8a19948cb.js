webpackJsonp([23],{Jips:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAxQTU1NjA0QzJDMDExRThBMkJERjcxQkQ1RDU4MThBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAxQTU1NjA1QzJDMDExRThBMkJERjcxQkQ1RDU4MThBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDFBNTU2MDJDMkMwMTFFOEEyQkRGNzFCRDVENTgxOEEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDFBNTU2MDNDMkMwMTFFOEEyQkRGNzFCRDVENTgxOEEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6RyG5xAAABaklEQVR42uzZQWrCQBQG4GSi4AkEPUfuoUhRceFOqL2NdNGuXLoIQqleI9doS68ghPQFXiFIZphm/jc2OA9+EIXJxzC8eWpclmXUpVJRxyqAA7jr4J7ugzRNbwrL8/x+jsSM8k35oEwFDHNe/5MyQYBfKUPKmHLkB6BqTTnw+iPKCwIc114n/IA5CLvnNX+rQIC3Vwsh0E3YC+UJAa6OwQqI1mGXlDOqD2cgtAn7hr44XNHO2DZ9uC0agm17cfwVDcO63HS2aCjWOEtYoiNGJlfoqgZorCvYBg3FIsAmdITGIqe1pjMNx6LHy4Hm/Wq3+//tG0dTN5AYmCBgXesqJNBKCLsED0yQLmF7KehaXuZzh22xGXqnlSBWBK2EsXC08oCFopUnLAxtA16Apy4TeoYA7wSmLh36GQEuhQYZ08DkBH6s/VT1gJq6aujqGHxxNoib7p0jVSeO9/HSS8XhX6QADuAANtaPAAMAv7CUlFI1/ZgAAAAASUVORK5CYII="},VbvP:function(t,e){},XOD9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"keyboard"},[i("ul",{staticClass:"num-list"},t._l(t.numList,function(e,s){return i("li",[i("div",{class:{light:t.currentIndex===s&&t.highlight},on:{touchstart:function(e){t.touchStart(s)},touchend:function(e){t.touchEnd(s)}}},[t._v(t._s(e))])])})),t._v(" "),i("div",{staticClass:"go-back",on:{click:t.rollBack}},[t._v("\n      回退\n    ")])])])},staticRenderFns:[]};var a=i("VU/8")({name:"keyboard",data:function(){return{numList:[1,2,3,4,5,6,7,8,9,0],highlight:!1,currentIndex:"",secret:""}},props:["visible","paying"],methods:{touchStart:function(t){this.paying||(this.secret.length>=6&&(this.secret=""),this.currentIndex=t,this.highlight=!0)},touchEnd:function(t){if(!this.paying){if(this.secret.length>=6)return!1;this.highlight=!1,this.secret+=this.numList[this.currentIndex].toString(),this.$emit("secretCompleted",this.secret)}},rollBack:function(){if(!this.paying){var t=this.secret;t=t.substr(0,t.length-1),this.secret=t,this.$emit("secretCompleted",this.secret)}}}},s,!1,function(t){i("VbvP")},"data-v-1994c66d",null).exports,n=(i("24Yc"),{name:"pay",data:function(){return{selectIndex:0,orderId:this.$route.params.orderId,amount:0,methods:[],advance:0,payType:"wx",payViewVisible:!1,storeName:this.$store.state.common.common_data.store_info.store_name,secret:"",paying:!1,payable:1,deskStatusTimer:null,showNotice:!1,deviceType:{isIOS:!1,isAndroid:!1}}},components:{Keyboard:a},beforeRouteEnter:function(t,e,i){i(function(t){"quick_meal_confirm"!==e.name&&"quick_meal_order"!==e.name&&"quick_meal_detail"!==e.name||(t.showNotice=!0)})},beforeDestroy:function(){clearInterval(this.deskStatusTimer)},mounted:function(){this.getPayMethod(),this.checkDevice()},methods:{checkDevice:function(){var t=window.navigator.userAgent.toLowerCase(),e=t.indexOf("android")>-1||t.indexOf("linux")>-1,i=!!t.match(/\(i[^;]+;( u;)? cpu.+mac os x/);e&&(this.deviceType.isAndroid=!0),i&&(this.deviceType.isIOS=!0)},getPayMethod:function(){var t=this;this.$http.post(this.API.order.pay_method,{order_id:this.orderId}).then(function(e){"0000"==e.return_code?(t.amount=e.data.amount,t.methods=e.data.methods,t.advance=e.data.advance,t.payable=e.data.payable):t.$myToast(e.return_msg)})},goPay:function(){this.deviceType.isAndroid?pay.goPaymentCode():this.deviceType.isIOS?window.webkit.messageHandlers.goPaymentCode.postMessage(""):this.$myToast("对不起，无法支付")},selectPayWay:function(t){this.payType=t},saveSecret:function(t){this.secret=t,t.length>=6&&this.goPay()},deskStatus:function(){var t=this,e=this.$store.state.common.common_data.desk_info.desk_id;e&&this.$http.post(this.API.seller.desk_status,{desk_id:e}).then(function(e){"0000"===e.return_code&&"6"==e.data.status&&t.$router.push("/pay_success/"+e.data.order_id)})}}}),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-page"},[s("div",{staticClass:"head"},[s("p",{staticClass:"store-name"},[t._v(t._s(t.storeName))]),t._v(" "),s("p",{staticClass:"lump-num"},[t._v("￥"+t._s(t._f("formatActualMoney")(t.amount)))]),t._v(" "),t.showNotice?s("p",{staticClass:"notice"},[t._v("您需要先完成支付,商家才会看到您的订单哦")]):t._e()]),t._v(" "),1==t.payable?s("button",{staticClass:"btn",on:{click:t.goPay}},[t._v("确认支付：￥"+t._s(t._f("formatActualMoney")(t.amount)))]):s("button",{staticClass:"btn"},[t._v("等待支付中...")]),t._v(" "),s("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.payViewVisible,callback:function(e){t.payViewVisible=e},expression:"payViewVisible"}},[s("div",{staticClass:"pay-pwd-view"},[s("div",{staticClass:"view-main"},[s("div",{staticClass:"title"},[t._v("\n          请输入支付密码\n        ")]),t._v(" "),s("p",{staticClass:"lump-num"},[t._v("￥"+t._s(t._f("formatActualMoney")(t.amount)))]),t._v(" "),s("ul",{staticClass:"pwd-wrapper"},[s("li",[t.secret.length>=1?s("i"):t._e()]),t._v(" "),s("li",[t.secret.length>=2?s("i"):t._e()]),t._v(" "),s("li",[t.secret.length>=3?s("i"):t._e()]),t._v(" "),s("li",[t.secret.length>=4?s("i"):t._e()]),t._v(" "),s("li",[t.secret.length>=5?s("i"):t._e()]),t._v(" "),s("li",[t.secret.length>=6?s("i"):t._e()])]),t._v(" "),s("div",{staticClass:"secret_notice"},[t._v("默认密码为手机号后6位")])]),t._v(" "),s("i",{staticClass:"close",on:{click:function(e){t.payViewVisible=!1}}},[s("img",{attrs:{src:i("Jips")}})])])]),t._v(" "),s("keyboard",{attrs:{paying:t.paying,visible:t.payViewVisible},on:{secretCompleted:t.saveSecret}})],1)},staticRenderFns:[]};var o=i("VU/8")(n,c,!1,function(t){i("lNvu")},"data-v-1dac1390",null);e.default=o.exports},lNvu:function(t,e){}});
//# sourceMappingURL=23.e3e6cedae9d8a19948cb.js.map