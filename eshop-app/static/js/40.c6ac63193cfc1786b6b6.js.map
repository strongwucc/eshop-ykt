{"version":3,"sources":["webpack:///src/components/login/login.vue","webpack:///./src/components/login/login.vue?814e","webpack:///./src/components/login/login.vue"],"names":["login","name","data","tel","veriCode","verifyErrorCount","vcode","env","wait60s","posting","second","redirect","this","$route","query","computed","extends_default","Object","vuex_esm","storeInfo","state","common","common_data","store_info","methods","getCode","_this","valid","check_mobile","$myLoading","open","text","spinnerType","$http","post","API","auth","mobile_code","phoneNumber","type","then","res","close","return_code","vm","timer","setInterval","clearInterval","$myToast","return_msg","doLogin","_this2","captcha","set_user_login_status","set_user_info","userinfo","set_user_bind_status","$router","push","login_login","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","height","_v","directives","rawName","value","expression","attrs","src","__webpack_require__","placeholder","domProps","on","input","$event","target","composing","maxlength","click","_s","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/40.c6ac63193cfc1786b6b6.js","sourcesContent":["<template>\n  <div class=\"bind-tel-page\">\n    <div class=\"mask-wrapper\">\n      <div style=\"height: 2px\"></div>\n      <img class=\"store-logo\" v-if=\"storeInfo\" v-lazy=\"storeInfo.store_log\"/>\n      <img class=\"store-logo\" v-else src=\"../../assets/img/common/login_logo_default@2x.png\"/>\n      <div class=\"input-wrapper tel\">\n        <input type=\"tel\" v-model=\"tel\" placeholder=\"请输入手机号\"/>\n      </div>\n      <div class=\"input-wrapper veri-code\">\n        <input type=\"text\" v-model=\"veriCode\" maxlength=\"6\" placeholder=\"请输入验证码\"/>\n        <div class=\"get-code\">\n          <span class=\"get\" v-show=\"!wait60s\" @click=\"getCode\">获取验证码</span>\n          <span class=\"repeat-get\" v-show=\"wait60s\">\n            重新发送({{second}}s)\n          </span>\n        </div>\n      </div>\n      <button class=\"btn\" @click=\"doLogin\">\n        登录\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { rootUrl } from '../../config/env'\n  import Valid from '../../utils/valid'\n  import {mapState, mapMutations} from 'vuex'\n  export default {\n    name: \"login\",\n    data () {\n      return {\n        tel: '',\n        veriCode: '',\n        verifyErrorCount: 0,//手机验证码输入错误次数，错误三次显示图形验证码\n        vcode: rootUrl + 'index.php/index-gen_vcode-b2c-4.html',\n        wait60s: false,\n        posting: false,\n        second: 60,\n        redirect: this.$route.query.redirect\n      }\n    },\n    computed: {\n      ...mapState({\n        storeInfo: state => state.common.common_data.store_info\n      })\n    },\n    methods: {\n      ...mapMutations([\n        'set_user_login_status',\n        'set_user_info',\n        'set_user_bind_status',\n      ]),\n      getCode () {\n        if (this.verifyErrorCount >= 3) {\n          return\n        }\n        if (! Valid.check_mobile(this.tel)) {\n          this.$myToast('请输入正确的手机号')\n          return\n        }\n\n        if (this.posting === true) {\n          return\n        }\n\n        this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\n        this.posting = true\n        this.$http.post(this.API.auth.mobile_code,{phoneNumber: this.tel, type: 'login'}).then(res => {\n\n          this.$myLoading.close()\n          this.posting = false\n          if (res.return_code === '0000') {\n            let vm = this\n            vm.wait60s = true\n            let timer = setInterval(() => {\n              vm.second -= 1\n              if (vm.second === 0) {\n                clearInterval(timer)\n                vm.wait60s = false\n                vm.second = 60\n              }\n            }, 1000)\n          } else {\n            this.$myToast(res.return_msg)\n            return\n          }\n        })\n      },\n      doLogin () {\n        if (! Valid.check_mobile(this.tel)) {\n          this.$myToast('请输入正确的手机号')\n          return\n        }\n\n        if (!this.veriCode) {\n          this.$myToast('请输入验证码')\n          return\n        }\n\n        this.$myLoading.open({ text: '加载中...', spinnerType: 'fading-circle'})\n        this.$http.post(this.API.auth.login,{phoneNumber: this.tel, captcha: this.veriCode, type: 'login'}).then(res => {\n          this.$myLoading.close()\n          if (res.return_code === '0000') {\n            if (this.redirect) {\n              this.set_user_login_status(1)\n              this.set_user_info(res.data.userinfo)\n              this.set_user_bind_status(1)\n              this.$router.push(this.redirect)\n            } else {\n              this.$router.push('/center')\n            }\n          } else {\n            this.verifyErrorCount += 1\n            this.$myToast(res.return_msg)\n            return\n          }\n        })\n\n      },\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../assets/css/common\";\n  .bind-tel-page{\n    height: 100%;\n    background: url(\"../../assets/img/home/login_bg@2x.png\") no-repeat;\n    background-size: 100% 100%;\n    background-position: center;\n    .mask-wrapper{\n      height: 100%;\n      background-color: rgba(0,0,0,.1);\n      .store-logo{\n        display: block;\n        width: 150px;\n        height: 150px;\n        margin: 146px auto 90px auto;\n      }\n      .input-wrapper{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 600px;\n        height: 98px;\n        border-radius: 49px;\n        background-color: #ffffff;\n        margin: 0 auto 20px auto;\n        input{\n          width: 440px;\n\n        }\n      }\n      .tel{\n        margin-top: 90px;\n      }\n      .veri-code{\n        position: relative;\n        .get-code{\n          position: absolute;\n          color: $themeColor;\n          top: 50%;\n          transform: translateY(-50%);\n          right: 50px;\n          .repeat-get{\n            color: #999999;\n          }\n        }\n      }\n      .btn{\n        display: block;\n        width: 600px;\n        height: 98px;\n        font-size: 32px;\n        background-color: $themeColor;\n        margin: 60px auto 0 auto;\n        border-radius: 49px;\n      }\n    }\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bind-tel-page\"},[_c('div',{staticClass:\"mask-wrapper\"},[_c('div',{staticStyle:{\"height\":\"2px\"}}),_vm._v(\" \"),(_vm.storeInfo)?_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.storeInfo.store_log),expression:\"storeInfo.store_log\"}],staticClass:\"store-logo\"}):_c('img',{staticClass:\"store-logo\",attrs:{\"src\":require(\"../../assets/img/common/login_logo_default@2x.png\")}}),_vm._v(\" \"),_c('div',{staticClass:\"input-wrapper tel\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tel),expression:\"tel\"}],attrs:{\"type\":\"tel\",\"placeholder\":\"请输入手机号\"},domProps:{\"value\":(_vm.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.tel=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"input-wrapper veri-code\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.veriCode),expression:\"veriCode\"}],attrs:{\"type\":\"text\",\"maxlength\":\"6\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.veriCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.veriCode=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"get-code\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.wait60s),expression:\"!wait60s\"}],staticClass:\"get\",on:{\"click\":_vm.getCode}},[_vm._v(\"获取验证码\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.wait60s),expression:\"wait60s\"}],staticClass:\"repeat-get\"},[_vm._v(\"\\n          重新发送(\"+_vm._s(_vm.second)+\"s)\\n        \")])])]),_vm._v(\" \"),_c('button',{staticClass:\"btn\",on:{\"click\":_vm.doLogin}},[_vm._v(\"\\n      登录\\n    \")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6b622d03\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6b622d03\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75,\\\"baseDpr\\\":2}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6b622d03\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6b622d03\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}