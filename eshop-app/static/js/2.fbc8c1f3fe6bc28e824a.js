webpackJsonp([2],{"26C2":function(t,s){},"3wXs":function(t,s){},"8jqG":function(t,s,e){"use strict";var i=e("flB3"),a={name:"goods",props:{items:Array},data:function(){return{type:0,specificationInfo:[]}},components:{BuyCart:i.a},created:function(){1==this.$attrs.needShake&&(this.type=2)},methods:{showSpecs:function(t){this.$emit("showSpecs",t)},moveInCart:function(){},showMoveDot:function(t,s,e){this.$emit("showMoveDot",t,s,e)},goodsDetail:function(t){this.$emit("showGoodsDetail",t)}}},n={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("ul",{staticClass:"goods-list"},t._l(t.items,function(s){return i("li",{staticClass:"goods-item"},[i("div",{staticClass:"pic-wrapper",on:{click:function(e){t.goodsDetail(s.image_url)}}},[s.image_url?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.image_url,expression:"item.image_url"}],staticClass:"goods-pic"}):i("img",{staticClass:"goods-pic",attrs:{src:e("3Cyy")}}),t._v(" "),t.NP.round(s.price-s.member_price,2)>0?i("img",{staticClass:"member-tip",attrs:{src:e("T2dr")}}):t._e()]),t._v(" "),i("div",{staticClass:"goods-info"},[i("p",{staticClass:"name"},[t._v("\n        "+t._s(t._f("longStrFormat")(s.name,15))+"\n        "),i("span",{staticClass:"unit"},[t._v(t._s("/"+s.unit))])]),t._v(" "),i("div",{staticClass:"b"},[i("p",{staticClass:"price"},[i("span",{staticClass:"finally-price"},[i("span",[t._v("￥")]),t._v(t._s(t._f("formatActualMoney")(s.member_price?s.member_price:s.price)))]),t._v(" "),t.NP.round(s.price-s.member_price,2)>0?i("span",{staticClass:"original-price"},[t._v("￥"+t._s(t._f("formatActualMoney")(t._f("formatMoney")(s.price))))]):t._e()]),t._v(" "),"false"===s.marketable?i("p",{staticClass:"sold-out"},[t._v("已售罄")]):i("buy-cart",{attrs:{foods:s,type:t.type},on:{showSpecs:function(e){t.showSpecs(s)},moveInCart:t.moveInCart,showMoveDot:t.showMoveDot}})],1)])])}))},staticRenderFns:[]};var o=e("VU/8")(a,n,!1,function(t){e("VMr3")},"data-v-198094ec",null);s.a=o.exports},EInh:function(t,s){},EjHt:function(t,s,e){"use strict";var i=e("Dd8w"),a=e.n(i),n=e("NYxO"),o={name:"take_out_floating",data:function(){return{featuresViewVisible:!1}},props:{appending:{type:Boolean,default:!1}},computed:a()({},Object(n.c)({cartInfo:function(t){return t.cart.cart},storeInfo:function(t){return t.common.common_data.store_info}}),{totalNum:function(){var t=0;return this.cartInfo.cartList.length>0&&this.cartInfo.cartList.forEach(function(s){t+=parseInt(s.num)}),t},totalPrice:function(){var t=0,s=0;return this.cartInfo.cartList.length>0&&this.cartInfo.cartList.forEach(function(e){t+=e.num*e.member_price,e.adjunct.length>0&&e.adjunct.forEach(function(t){s+=t.num*t.member_price})}),this.NP.round(t+s,1)},minimum:function(){var t=this.$store.state.common.common_data.store_info;return t.minimum?t.minimum:15}}),created:function(){},methods:{featuresViewtoggle:function(){this.featuresViewVisible=!this.featuresViewVisible},showCart:function(){this.$emit("showCart")},goSettle:function(){this.$router.push("/take_out_confirm")}}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"floatingBox",staticClass:"floating-box"},[i("div",{staticClass:"features"},[i("div",{staticClass:"title",on:{click:t.featuresViewtoggle}},[i("img",{staticClass:"icon",attrs:{src:e("DHIp")}}),t._v("\n      功能\n    ")]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:t.featuresViewVisible,expression:"featuresViewVisible"}],staticClass:"list"},[i("li",{on:{click:function(s){t.$router.push("/center")}}},[t._v("会员中心")]),t._v(" "),i("li",{on:{click:function(s){t.$router.push("/my_order/dine")}}},[t._v("我的订单")]),t._v(" "),i("li",{on:{click:function(s){t.$router.push("/my_coupons")}}},[t._v("我的优惠券")]),t._v(" "),i("li",{on:{click:function(s){t.$router.push("/shop_cart")}}},[t._v("购物车")])])]),t._v(" "),i("div",{staticClass:"shopping-cart"},[i("div",{ref:"cartContainer",staticClass:"circle",on:{click:t.showCart}},[t.totalNum?i("div",{staticClass:"num"},[t._v(t._s(t.totalNum))]):t._e()]),t._v(" "),t.totalPrice>0?i("p",{staticClass:"total"},[t._v("￥"),i("span",[t._v(t._s(t._f("formatActualMoney")(t.totalPrice)))])]):i("p",{staticClass:"empty"},[i("span",[t._v("空空如也")])]),t._v(" "),t.totalPrice>=t.minimum?i("p",{staticClass:"action",on:{click:function(s){return s.stopPropagation(),t.goSettle(s)}}},[t._v("去结算")]):i("p",{staticClass:"action"},[t._v("起送￥"+t._s(t.minimum))])])])},staticRenderFns:[]};var c=e("VU/8")(o,r,!1,function(t){e("qvX/")},"data-v-fe784b24",null);s.a=c.exports},H1Uu:function(t,s){},UjaS:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Gu7T"),a=e.n(i),n=e("c/Tr"),o=e.n(n),r=e("Dd8w"),c=e.n(r),l=e("woOf"),d=e.n(l),u=e("GQaK"),h=e("8jqG"),f=e("EjHt"),_=e("MYSA"),m=e("ePS5"),p=e("NYxO"),v={name:"take_out_cart_info",components:{BuyCart:e("flB3").a},data:function(){return{}},props:[],watch:{},mounted:function(){this.$nextTick(function(){})},computed:c()({},Object(p.c)({cartList:function(t){return t.cart.cart.cartList},storeId:function(t){return t.common.common_data.store_info.store_id}}),{cartNum:function(){var t=0;return this.$store.state.cart.cart.cartList.forEach(function(s,e){t+=s.num}),t}}),methods:c()({},Object(p.b)(["addCart","reduceCart","clearCart"]),{wrapperAttr:function(){if(this.cartItem){var t=this.$refs.cartSpecification.offsetHeight,s=this.$refs.title.offsetHeight;this.$refs.specification.offsetHeight>t-s&&(this.$refs.wrapper.style.height=t-s+"px")}},addToCart:function(){var t=this.common.common_data.store_info.store_id,s={};s.product_id=this.cartItem.product.product_id,s.goods_bn=this.cartItem.bn,s.bn=this.cartItem.product.bn,s.name=this.cartItem.product.name,s.image_url=this.cartItem.image_url,s.price=this.cartItem.price,s.member_price=this.cartItem.member_price,s.num=1,s.unit=this.cartItem.unit,s.catId=this.cartItem.cat_id;var e=[];this.adjunctsData.forEach(function(t){var s={goods_bn:t.bn,num:t.num,price:t.price,member_price:t.member_price};e.push(s)}),s.adjunct=e,s.taste=this.tastesData,this.addCart({storeId:t,catId:this.cartItem.cat_id,goods:s}),this.$emit("closeCart")}})},g={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"cartSpecification",staticClass:"cart-specification"},[i("div",{ref:"title",staticClass:"title"},[i("div",{staticClass:"left"},[t._v("购物车（共"+t._s(t.cartNum)+"件）")]),t._v(" "),i("div",{staticClass:"right",on:{click:function(s){s.stopPropagation(),t.clearCart(t.storeId)}}},[i("img",{attrs:{src:e("7SVW")}}),i("span",[t._v("清空购物车")])])]),t._v(" "),i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{ref:"specification",staticClass:"specification"},[i("ul",{staticClass:"order-list"},t._l(t.cartList,function(s){return i("li",[i("div",{staticClass:"main"},[i("p",{staticClass:"goods-name"},[t._v(t._s(t._f("longStrFormat")(s.name,11))),i("span",{staticClass:"unit"},[t._v("/"+t._s(s.unit))])]),t._v(" "),i("div",{staticClass:"r"},[i("div",{staticClass:"price"},[i("p",{staticClass:"finally-price"},[t.NP.round(parseFloat(s.price)-parseFloat(s.member_price),2)>0?i("span",{staticClass:"member-tip"},[t._v("会员价")]):t._e(),t._v("￥"+t._s(t._f("formatActualMoney")(s.member_price)))]),t._v(" "),t.NP.round(parseFloat(s.price)-parseFloat(s.member_price),2)>0?i("p",{staticClass:"original-price"},[t._v("￥"+t._s(t._f("formatActualMoney")(t._f("formatMoney")(s.price))))]):t._e()]),t._v(" "),i("buy-cart",{attrs:{foods:s,type:1}})],1)]),t._v(" "),i("div",{staticClass:"minor"},[i("p",{staticClass:"adjuncts"},[s.taste.length>0?[t._l(s.taste,function(e,a){return t._l(e.items,function(e,a){return i("span",[t._v("\n                      "+t._s(e.props_name)+"\n                      "),[t._v(t._s(a===s.taste.length-1?"；":"，"))]],2)})})]:t._e(),t._v(" "),s.adjunct.length?t._l(s.adjunct,function(e,a){return i("span",[t._v(t._s(e.name+"×"+e.num)),[t._v(t._s(a===s.adjunct.length-1?"；":"，"))]],2)}):t._e()],2),t._v(" "),i("div",{staticClass:"r"})])])})),t._v(" "),i("div",{staticClass:"filler"})])])])},staticRenderFns:[]};var C=e("VU/8")(v,g,!1,function(t){e("3wXs")},"data-v-b99b0366",null).exports,I=document.querySelector("html").getAttribute("data-dpr"),S={name:"take_out",data:function(){return{appending:!1,windowHeight:0,standardLength:0,showSimulationBtn:!0,showStoreInfo:!1,showLoading:!0,storeId:this.$route.params.storeId,directlyAdd:0,operation:!0,blockSearhIocn:!0,graySearhIocn:!1,dishes:[],bodyScroll:!0,sideScroll:!1,mainScroll:!1,mainReachTop:!0,sideReachTop:!0,jsScroll:!1,featuresViewVisible:!1,goodsTitleListTop:[],goodsListTop:[],mainLengthDifference:0,catIndex:0,catIndexChange:!0,showMoveDot:[],categoryNum:[],totalPrice:0,cartFoodList:[],specsVisible:!1,specificationInfo:[],goodsDetailVisible:!1,goodsPic:"",storeInf:{store_log:"",desk:{},store_name:"",open_time:"",minimum:15},gettingGoodsDetail:!1,cartInfoVisible:!1}},components:{Goods:h.a,Floating:f.a,StoreInfo:_.a,GoodsSpecification:m.a,CartSpecification:C},watch:{bodyScroll:function(t){t?(this._bodyScroll.enable(),this._bodyScroll.scrollTo(0,0,400)):this._bodyScroll.disable()},sideScroll:function(t){t?(this._sideScroll.enable(),this.touchStartX&&this.touchStartX<this.elementsStyle.SIDE_WIDTH&&!this.jsScroll&&document.querySelector(".side").offsetHeight<document.querySelector(".side").children[0].offsetHeight&&this._sideScroll.scrollTo(0,-200*I,1e3)):this._sideScroll.disable()},catIndex:function(t){var s=this.$refs.sideScrollBox.offsetHeight;this.goodsTitleListTop[t]>s&&this._sideScroll.scrollTo(0,this.goodsTitleListTop[t]-s,200)},showLoading:function(t){var s=this;t||this.$nextTick(function(){s.getdishesHeight()})}},beforeDestroy:function(){},beforeRouteEnter:function(t,s,e){e(function(t){"people_num"!==s.name&&t.getStoreInfo()})},created:function(){this.elementsStyle=null,this.$store.state.common.common_data.store_info&&(this.storeInf=d()(this.storeInf,this.$store.state.common.common_data.store_info))},mounted:function(){var t=this;this.getCartInfo(this.storeId),setTimeout(function(){t._getStyle(),t._setStyle(),t._bodyScrollEvent(),t._pageTouchListener(),t.axiosAll()},30)},computed:c()({},Object(p.c)({cartInfo:function(t){return t.cart.cart}})),methods:c()({},Object(p.b)(["set_user_cart","set_common_data_store_info","set_common_data_desk_info","getCartInfo"]),{getStoreInfo:function(){var t=this;this.$http.post(this.API.seller.store_info,{store_id:this.storeId,desk_id:this.deskId}).then(function(s){"0000"===s.return_code?(t.storeInfo=s.data.store,t.set_user_cart(s.data.user_cart),s.data.store&&(t.set_common_data_store_info(s.data.store),t.storeInf=s.data.store),s.data.desk&&t.set_common_data_desk_info(s.data.desk)):t.$myToast(s.return_msg)})},goSearch:function(){this.$router.push({name:"take_out_search",params:{storeId:this.storeId}})},initDishes:function(){return this.$http.post(this.API.seller.seller_goods,{})},axiosAll:function(){var t=this;this.$myLoading.open({text:"加载中...",spinnerType:"fading-circle"}),this.$http.all([this.initDishes()]).then(function(s){if("0000"===s[0].return_code){t.dishes=s[0].data.list;var e=[];t.dishes.forEach(function(t){e.push(t.cat_id)}),t.catIdList=e,t.showLoading=!1,t.$myLoading.close()}else t.$myToast(s[0].return_msg)})},changeCategroyNum:function(t){this.categoryNum=t},featuresViewtoggle:function(){this.featuresViewVisible=!this.featuresViewVisible},showSpecsList:function(t){var s=this;if(this.gettingGoodsDetail)return!1;this.gettingGoodsDetail=!0,this.$http.post(this.API.seller.store_goods_detail,{store_id:this.storeId,product_id:t.product.product_id}).then(function(t){s.gettingGoodsDetail=!1,"0000"==t.return_code&&(s.specsVisible=!0,s.specificationInfo=t.data.detail)})},showCartInfo:function(){this.cartInfoVisible=!0,this.$refs.floating.$refs.floatingBox.style.zIndex=9999},closeSpecsList:function(){this.specsVisible=!1},closeCartInfo:function(t){!1===t&&(this.cartInfoVisible=!1,this.$refs.floating.$refs.floatingBox.style.zIndex=99)},showGoodsDetail:function(t){this.goodsDetailVisible=!0,this.goodsPic=t},getdishesHeight:function(){var t=this,s=this.$refs.mainScrollBox,e=this.$refs.sideScrollBox,i=o()(s.children[0].children),a=o()(e.children[0].children);this.mainLengthDifference=s.children[0].offsetHeight-s.offsetHeight,i.forEach(function(s,e){t.goodsListTop[e]=s.offsetTop}),a.forEach(function(s,i,a){i!==a.length-1?t.goodsTitleListTop[i]=a[i+1].offsetTop:t.goodsTitleListTop[i]=e.children[0].offsetHeight}),this._sideScrollEvent(),this._mainScrollEvent()},chooseMenu:function(t){this.catIndex=t,this.catIndexChange=!1,this.jsScroll=!0,this._bodyScroll.scrollTo(0,-this.elementsStyle.SCROLL_HEIGHT,400),this._mainScroll.scrollTo(0,-this.goodsListTop[this.catIndex],400)},showMoveDotFun:function(t,s,e){this.showMoveDot=[].concat(a()(this.showMoveDot),a()(t)),this.elLeft=s,this.elBottom=e},beforeEnter:function(t){t.style.transform="translate3d(0,"+(this.elBottom-this.windowHeight+.4*this.standardLength)+"px,0)",t.children[0].style.transform="translate3d("+(this.elLeft-3*this.standardLength)+"px,0,0)",t.children[0].style.opacity=0},afterEnter:function(t){var s=this;t.style.transform="translate3d(0,0,0)",t.children[0].style.transform="translate3d(0,0,0)",t.style.transition="transform .5s cubic-bezier(0.3, -0.25, 0.7, -0.15)",t.children[0].style.transition="transform .5s linear",this.showMoveDot=this.showMoveDot.map(function(t){return!1}),t.children[0].style.opacity=1,t.children[0].addEventListener("transitionend",function(){s.listenInCart()},!!this.$passiveSupported&&{passive:!0}),t.children[0].addEventListener("webkitAnimationEnd",function(){s.listenInCart()},!!this.$passiveSupported&&{passive:!0})},listenInCart:function(){this.receiveInCart||(this.receiveInCart=!0)},_getStyle:function(){document.getElementById("app").style.height=window.innerHeight+"px";var t=this.$refs.banner,s=this.$refs.storeInfo,e=document.querySelector(".search-icon"),i=document.querySelector(".table-num"),a=document.querySelector(".side");this.windowHeight=window.innerHeight,this.standardLength=this.$refs._100px.offsetWidth,this.elementsStyle={REDUCE_HEIGHT:t.offsetHeight/2+i.offsetHeight,SCROLL_HEIGHT:t.offsetHeight/2+s.offsetHeight,SEARCHICON_TRANSLATE_Y:(t.offsetHeight/2-e.offsetHeight)/2+t.offsetHeight/2+e.offsetHeight/2,SEARCHICON_TRANSLATE_X:(window.innerWidth-2*e.offsetWidth-220*I)/2,SEARCHICON_INIT_WIDTH:e.offsetWidth,SEARCH_ADD_WIDTH:220*I,SEARCHICON_INIT_RADIUS:15*I,SEARCHICON_ADD_RADIUS:11*I,SEARCHICON_GRAY:115*I,SIDE_WIDTH:a.offsetWidth,SIDE_HEIGHT:a.offsetHeight,SIDE_UL_HEIGHT:a.children[0].offsetHeight}},_setStyle:function(){this.$refs._wrapper.style.paddingTop=this.$refs.banner.offsetHeight+this.$refs.storeInfo.offsetHeight+"px",this.$refs.overview.style.height=window.innerHeight-this.elementsStyle.REDUCE_HEIGHT+"px"},_bodyScrollEvent:function(){var t=this;this._bodyScroll=new u.a(this.$refs.scrollWrapper,{scrollY:!0,click:!0,bounce:!1,probeType:3,flickLimitDistance:this.standardLength/2});var s=this.$refs.logo,e=this.$refs.searchIcon,i=this.elementsStyle;this._bodyScroll.on("scroll",function(a){var n=-a.y.toFixed(1),o=(i.SCROLL_HEIGHT-n)/i.SCROLL_HEIGHT;s.style.opacity=o,s.style.transform="scale("+o+")",a.y<-5?t.blockSearhIocn=!1:t.blockSearhIocn=!0,a.y<-i.SEARCHICON_GRAY?t.graySearhIocn=!0:t.graySearhIocn=!1,e.style.transform="translate(-"+(1-o)*i.SEARCHICON_TRANSLATE_X+"px, -"+(1-o)*i.SEARCHICON_TRANSLATE_Y+"px)",e.style.width=(1-o)*i.SEARCH_ADD_WIDTH+i.SEARCHICON_INIT_WIDTH+"px",e.style.borderRadius=i.SEARCHICON_INIT_RADIUS-(1-o)*i.SEARCHICON_ADD_RADIUS+"px"}),this._bodyScroll.on("scrollEnd",function(s){-s.y===i.SCROLL_HEIGHT?(t.bodyScroll=!1,t.showSimulationBtn=!1):t.showSimulationBtn=!0})},_sideScrollEvent:function(){var t=this;this._sideScroll=new u.a(this.$refs.sideScrollBox,{scrollY:!0,click:!0,bounce:!1,probeType:3}),!this.sideScroll&&this._sideScroll.disable(),this._sideScroll.on("scrollEnd",function(s){s.y>=-3?t.sideReachTop=!0:t.sideReachTop=!1})},_mainScrollEvent:function(){var t=this;this._mainScroll=new u.a(this.$refs.mainScrollBox,{scrollY:!0,click:!0,bounce:!1,probeType:3}),this._mainScroll.on("scroll",function(s){t.$refs.sideScrollBox&&t.goodsListTop.forEach(function(e,i){t.catIndexChange&&Math.abs(Math.round(s.y))>=e&&(t.catIndex=i)})}),this._mainScroll.on("scrollEnd",function(s){s.y>=-3?t.mainReachTop=!0:t.mainReachTop=!1,t.catIndexChange=!0})},_pageTouchListener:function(){var t=this;this.$refs.homePage.addEventListener("touchstart",function(s){t.touchStartX=s.touches[0].pageX,t.touchStartY=s.touches[0].pageY},!!this.$passiveSupported&&{passive:!0}),this.$refs.homePage.addEventListener("touchend",function(s){var e=s.changedTouches[0].pageY;!t.bodyScroll&&e-t.touchStartY>50*I&&t.mainReachTop&&(t.bodyScroll=!0)},!!this.$passiveSupported&&{passive:!0})}})},b={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"homePage",staticClass:"home-page",style:{visibility:t.showLoading?"hidden":"visible"}},[i("div",{ref:"_100px",staticClass:"_100px"}),t._v(" "),i("div",{staticClass:"fixed-wrapper"},[i("div",{ref:"banner",staticClass:"banner"},[t.storeInf?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.storeInf.store_log,expression:"storeInf.store_log"}],ref:"logo",staticClass:"logo"}):i("img",{ref:"logo",staticClass:"logo",attrs:{src:e("Qcae")}}),t._v(" "),i("div",{ref:"searchIcon",staticClass:"search-icon"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.blockSearhIocn,expression:"blockSearhIocn"}],staticClass:"block-icon",attrs:{src:e("Puz1")}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.graySearhIocn,expression:"graySearhIocn"}],staticClass:"scroll-show"},[i("img",{attrs:{src:e("lmx/")}}),t._v(" "),i("span",{style:{visibility:t.graySearhIocn?"visible":"hidden"}},[t._v("有什么想吃的搜一搜")])])])]),t._v(" "),i("div",{ref:"storeInfo",staticClass:"store-info",attrs:{id:"store_info"}},[t.storeInf?i("h3",{staticClass:"store-name"},[t._v("\n        "+t._s(t.storeInf.store_name)+"\n        "),t.operation?i("span",{staticClass:"in-operation"},[t._v("营业中")]):t._e(),t._v(" "),t.operation?t._e():i("span",{staticClass:"resting"},[t._v("暂停营业")])]):t._e(),t._v(" "),i("div",{staticClass:"info01"},[t.storeInf?i("p",{staticClass:"business-hours"},[t._v("\n          营业时间："+t._s(t.storeInf.open_time)+"\n        ")]):t._e(),t._v(" "),t._m(0)])])]),t._v(" "),i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper"},[i("div",{ref:"_wrapper",staticClass:"wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSimulationBtn,expression:"showSimulationBtn"}],staticClass:"search-btn",on:{click:t.goSearch}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSimulationBtn,expression:"showSimulationBtn"}],staticClass:"store-info-btn",on:{touchstart:function(s){t.showStoreInfo=!0}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSimulationBtn,expression:"!showSimulationBtn"}],staticClass:"search-faker",on:{click:t.goSearch}}),t._v(" "),i("p",{staticClass:"table-num"}),t._v(" "),i("div",{ref:"overview",staticClass:"goods-overview"},[i("div",{ref:"sideScrollBox",staticClass:"side scroll-box"},[i("ul",{staticClass:"goods-type-list"},t._l(t.dishes,function(s,a){return i("li",{key:a,staticClass:"type-item",class:{activity_menu:a===t.catIndex},on:{click:function(s){t.chooseMenu(a)}}},[0===a?i("img",{staticClass:"icon",attrs:{src:e("FyJC")}}):t._e(),t._v(" "),i("span",{staticClass:"txt"},[t._v("\n               "+t._s(s.cat_name)+"\n             ")]),t._v(" "),t.cartInfo.catList[s.cat_id]>0?i("span",{staticClass:"category-num"},[t._v(t._s(t.cartInfo.catList[s.cat_id]))]):t._e()])}))]),t._v(" "),i("div",{ref:"mainScrollBox",staticClass:"main scroll-box"},[i("ul",{staticClass:"outside-list"},t._l(t.dishes,function(s){return i("li",{staticClass:"outside-item"},[i("h4",{staticClass:"type-name"},[t._v("\n                "+t._s(s.cat_name)+"\n              ")]),t._v(" "),i("goods",{attrs:{items:s.goods},on:{showSpecs:t.showSpecsList,moveInCart:t.listenInCart,showMoveDot:t.showMoveDotFun,showGoodsDetail:t.showGoodsDetail}})],1)}))])])])]),t._v(" "),i("floating",{ref:"floating",attrs:{appending:t.appending},on:{showCart:t.showCartInfo}}),t._v(" "),i("mt-popup",{attrs:{position:"bottom"},model:{value:t.specsVisible,callback:function(s){t.specsVisible=s},expression:"specsVisible"}},[i("goods-specification",{attrs:{info:t.specificationInfo},on:{closeSpecs:t.closeSpecsList}})],1),t._v(" "),i("mt-popup",{staticClass:"goods-detail-wrapper",attrs:{position:"center","popup-transition":"popup-fade"},model:{value:t.goodsDetailVisible,callback:function(s){t.goodsDetailVisible=s},expression:"goodsDetailVisible"}},[i("div",{staticClass:"goods-detail"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.goodsPic,expression:"goodsPic"}],staticClass:"goods-pic"})])]),t._v(" "),i("mt-popup",{attrs:{position:"bottom"},on:{input:t.closeCartInfo},model:{value:t.cartInfoVisible,callback:function(s){t.cartInfoVisible=s},expression:"cartInfoVisible"}},[i("cart-specification",{on:{closeCart:t.closeCartInfo}})],1),t._v(" "),i("store-info",{class:{show_info:t.showStoreInfo},attrs:{"store-info":t.storeInf},on:{close:function(s){t.showStoreInfo=!1}}}),t._v(" "),t._l(t.showMoveDot,function(s,e){return i("transition",{key:e,attrs:{appear:""},on:{"after-appear":t.afterEnter,"before-appear":t.beforeEnter}},[s?i("div",{staticClass:"move-dot"},[i("span",{staticClass:"move-liner"})]):t._e()])})],2)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"introduction-btn"},[this._v("\n          商铺信息\n          "),s("i",{staticClass:"fa fa-angle-right"})])}]};var w=e("VU/8")(S,b,!1,function(t){e("26C2")},"data-v-50c93a0e",null);s.default=w.exports},VMr3:function(t,s){},ePS5:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),n=e("Dd8w"),o=e.n(n),r=e("NYxO"),c={name:"take_out_goods_specification",data:function(){return{appending:this.$route.query.appending,dish:null,adjunctsData:[],tastesData:[],showTastesData:[],adjunctsDataIndex:null,adjunctNumShow:!1,adjunctNum:1,tasteSelectedIndex:[],adjunctSelectedIndex:[]}},props:["info"],watch:{info:function(t){this.dish=t,this.adjunctsData=[],this.tastesData=[],this.showTastesData=[],this.adjunctsDataIndex=null,this.adjunctNumShow=!1,this.adjunctNum=1,this.tasteSelectedIndex=[],this.adjunctSelectedIndex=[]}},mounted:function(){this.$nextTick(function(){})},computed:o()({},Object(r.c)(["common"]),{adjunctTotal:function(){var t=0;return this.adjunctsData.forEach(function(s,e){t+=s.price*s.num}),this.NP.round(t,2)}}),methods:o()({},Object(r.b)(["set_user_cart","addCart"]),{wrapperAttr:function(){if(this.dish){var t=this.$refs.goodsSpecification.offsetHeight,s=this.$refs.goodsInfo.offsetHeight;this.$refs.specification.offsetHeight>t-s&&(this.$refs.wrapper.style.height=t-s+"px")}},close:function(){this.$emit("closeSpecs")},getPropName:function(t){var s="";return this.dish.props.forEach(function(e,i){e.props_id==t&&(s=e.name)}),s},selectTaste:function(t){var s=!1,e=!1,i=0,a=0;if(this.tastesData.forEach(function(n,o){t.props_id===n.props_id&&(i=o,s=!0,n.items.forEach(function(s,i){t.id===s.props_value_id&&(e=!0,a=i)}))}),!0===e)this.tasteSelectedIndex[t.id]=!1,this.tastesData[i].items.splice(a,1),this.showTastesData.splice(a,1);else if(!0===s)this.tasteSelectedIndex[t.id]=!0,this.tastesData[i].items.push({props_value_id:t.id,props_name:t.name}),this.showTastesData.push({id:t.id,name:t.name});else{this.tasteSelectedIndex[t.id]=!0;var n=this.getPropName(t.props_id);this.tastesData.push({props_id:t.props_id,name:n,items:[{props_value_id:t.id,props_name:t.name}]}),this.showTastesData.push({id:t.id,name:t.name})}},selectAjunct:function(t){var s=this.dish.adjuncts[t],e=!1,i=0;this.adjunctsData.forEach(function(t,a){s.bn===t.bn&&(e=!0,i=a)}),!0===e?(this.adjunctsData[i].num+=1,this.adjunctsDataIndex=i,this.adjunctNum=this.adjunctsData[i].num,this.adjunctSelectedIndex[t]+=1):(this.adjunctSelectedIndex[t]=1,this.adjunctsDataIndex=this.adjunctsData.length,this.adjunctNum=1,this.adjunctsData.push({bn:s.bn,name:s.name,price:s.price,member_price:s.member_price,num:1,index:t})),this.adjunctNumShow=!0},selectSpec:function(t){var s=this;if("1"===t.checked||""===t.product_id)return!1;var e=this.common.common_data.store_info.store_id;this.$http.post(this.API.seller.store_goods_detail,{store_id:e,product_id:t.product_id}).then(function(t){"0000"==t.return_code&&(s.dish=a()({},t.data.detail))})},minusAdjunct:function(){var t=this.adjunctsData[this.adjunctsDataIndex].num;1===t?(this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]=0,this.adjunctsData.splice(this.adjunctsDataIndex,1),this.adjunctNumShow=!1,this.adjunctsDataIndex=null,this.adjunctNum=1):(this.adjunctsData[this.adjunctsDataIndex].num=t-1,this.adjunctNum=t-1,this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]=t-1)},addAdjunct:function(){this.adjunctsData[this.adjunctsDataIndex].num+=1,this.adjunctNum+=1,this.adjunctSelectedIndex[this.adjunctsData[this.adjunctsDataIndex].index]+=1},addToCart:function(){var t=this.common.common_data.store_info.store_id,s={};s.product_id=this.dish.product.product_id,s.goods_bn=this.dish.bn,s.bn=this.dish.product.bn,s.name=this.dish.product.name,s.image_url=this.dish.image_url,s.price=this.dish.price,s.member_price=this.dish.member_price,s.num=1,s.unit=this.dish.unit,s.catId=this.dish.cat_id;var e=[];this.adjunctsData.forEach(function(t){var s={goods_bn:t.bn,num:t.num,price:t.price,member_price:t.member_price,name:t.name};e.push(s)}),s.adjunct=e,s.taste=this.tastesData,this.addCart({storeId:t,catId:this.dish.cat_id,goods:s}),this.$emit("closeSpecs")}})},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"goodsSpecification",staticClass:"goods-specification"},[i("div",{staticClass:"close",on:{touchstart:t.close}},[i("img",{attrs:{src:e("qI6Q")}})]),t._v(" "),t.dish?i("div",{ref:"goodsInfo",staticClass:"goods-info"},[i("div",{staticClass:"goods-pic"},[t.dish.image_url?i("img",{staticClass:"pic",attrs:{src:t.dish.image_url}}):i("img",{staticClass:"pic",attrs:{src:e("3Cyy")}}),t._v(" "),t.dish.member_price?i("img",{staticClass:"member-tip",attrs:{src:e("T2dr")}}):t._e()]),t._v(" "),i("div",{staticClass:"r"},[i("p",{staticClass:"name"},[t._v("\n        "+t._s(t.dish.name)+"\n        "),i("span",{staticClass:"unit"},[t._v("/例")])]),t._v(" "),i("div",{staticClass:"price"},[i("span",{staticClass:"finally-price"},[i("span",{staticClass:"money-symbol"},[t._v("￥")]),t._v(t._s(t._f("formatActualMoney")(t.dish.member_price)))]),t._v(" "),t.NP.round(t.dish.price-t.dish.member_price)>0?i("span",{staticClass:"original-price"},[i("span",{staticClass:"money-symbol"},[t._v("￥")]),t._v(t._s(t._f("formatActualMoney")(t._f("formatMoney")(t.dish.price))))]):t._e()]),t._v(" "),i("div",{staticClass:"have-choose"},[t._v("\n        已选：\n        "),i("span",[t._l(t.tastesData,function(s,e){return[t._l(s.items,function(e,i){return[t._v("\n              "+t._s(e.props_name)+"\n              "),i===s.items.length-1?[t._v("；")]:t._e()]})]})],2),t._v(" "),i("span",[t._l(t.adjunctsData,function(s,e){return[t._v("\n            "+t._s(s.name)+"x"+t._s(s.num)+"\n            "),e===t.adjunctsData.length-1?[t._v("；")]:[t._v("，")]]})],2)])])]):t._e(),t._v(" "),t.dish?i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{ref:"specification",staticClass:"specification"},[t._l(t.dish.specs,function(s){return[i("div",{staticClass:"category"},[i("h4",{staticClass:"title"},[t._v(t._s(s.spec_name))]),t._v(" "),i("ul",{staticClass:"parameter-list"},t._l(s.items,function(s,e){return i("li",{staticClass:"parameter",class:{selected:"1"==s.checked},on:{click:function(e){t.selectSpec(s)}}},[i("span",{staticClass:"txt"},[t._v("\n            "+t._s(s.spec_value)+"\n          ")])])}))])]}),t._v(" "),t._l(t.dish.props,function(s){return[i("div",{staticClass:"category"},[i("h4",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),i("ul",{staticClass:"parameter-list"},t._l(s.values,function(s,e){return i("li",{staticClass:"parameter",class:{selected:t.tasteSelectedIndex[s.id]},on:{click:function(e){t.selectTaste(s)}}},[i("span",{staticClass:"txt"},[t._v("\n            "+t._s(s.name)+"\n          ")])])}))])]}),t._v(" "),t.dish.adjuncts.length>0?i("div",{staticClass:"category"},[i("h4",{staticClass:"title"},[t._v("配菜")]),t._v(" "),i("ul",{staticClass:"parameter-list"},t._l(t.dish.adjuncts,function(s,e){return i("li",{staticClass:"parameter",class:{selected:t.adjunctSelectedIndex[e]},on:{click:function(s){t.selectAjunct(e)}}},[i("span",{staticClass:"txt"},[t._v("\n              "+t._s(s.name)+"\n              "),s.member_price?i("span",{staticClass:"price"},[t._v("￥"+t._s(s.member_price))]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.adjunctSelectedIndex[e],expression:"adjunctSelectedIndex[index]"}],staticClass:"selected-num"},[t._v("\n              "+t._s(t.adjunctSelectedIndex[e])+"\n            ")])])}))]):t._e(),t._v(" "),i("div",{staticClass:"filler"})],2)]):t._e(),t._v(" "),i("div",{staticClass:"bottom-assembly"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.adjunctNumShow,expression:"adjunctNumShow"}],staticClass:"num"},[i("span",{staticClass:"title"},[t._v("配菜数量")]),t._v(" "),i("div",{staticClass:"inputNumber"},[i("i",{staticClass:"reduce",on:{click:t.minusAdjunct}},[i("img",{attrs:{src:e("OE/g")}})]),t._v("\n        "+t._s(t.adjunctNum)+"\n        "),i("i",{staticClass:"add",on:{click:t.addAdjunct}},[i("img",{attrs:{src:e("Aazb")}})])])]),t._v(" "),i("button",{staticClass:"add-cart",on:{click:t.addToCart}},[t._v("加入购物车")])])])},staticRenderFns:[]};var d=e("VU/8")(c,l,!1,function(t){e("H1Uu")},"data-v-5e5a902a",null);s.a=d.exports},flB3:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),n=e("Dd8w"),o=e.n(n),r=e("NYxO"),c=e("xipm"),l={name:"quick_meal_buy_cart",data:function(){return{appending:this.$route.query.appending,showMoveDot:[],removing:!1,adding:!1}},props:["foods","type"],inheritAttrs:!1,computed:o()({},Object(r.c)({cartInfo:function(t){return t.cart.cart},storeId:function(t){return t.common.common_data.store_info.store_id}}),{shopCart:function(){return a()({},this.cartList)},foodNum:function(){var t=this,s=0,e=-1;return 0==this.type?this.cartInfo.cartList&&this.cartInfo.cartList.every(function(i,a){return i.goods_bn!=t.foods.bn||(s+=i.num,e=a,!0)}):this.cartInfo.cartList&&this.cartInfo.cartList.every(function(i,a){return i.goods_bn!=t.foods.goods_bn||(s+=i.num,e=a,!0)}),{num:s,itemId:e}}}),methods:o()({},Object(r.b)(["addCart","reduceCart"]),{removeOutCart:function(t){t>=0&&this.reduceCart({storeId:this.storeId,itemId:t})},addToCart:function(t,s){if(2!=this.type)if("1"===t.adjunct_exist||"1"===t.props_exist||t.spec_count>1)this.$emit("showSpecs");else{var e={},i=-1;1==this.type?(e=a()(e,t),i=t.catId):(e.product_id=t.product.product_id,e.goods_bn=t.bn,e.bn=t.product.bn,e.name=t.product.name,e.image_url=t.image_url,e.price=t.price,e.member_price=t.member_price,e.num=1,e.unit=t.unit,e.catId=t.cat_id,e.adjunct=[],e.taste=[],i=t.cat_id),this.addCart({storeId:this.storeId,catId:i,goods:e});var n=s.target.getBoundingClientRect().left,o=s.target.getBoundingClientRect().bottom;this.showMoveDot.push(!0),this.$emit("showMoveDot",this.showMoveDot,n,o)}else c.a.$emit("shakeNotice")}})},d={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"buy-cart",class:{gray_bg:t.foodNum.num}},[i("transition",{attrs:{name:"showReduce"}},[t.foodNum.num&&t.foods?i("i",{staticClass:"remove-icon",on:{click:function(s){s.stopPropagation(),t.removeOutCart(t.foodNum.itemId)}}},[i("img",{attrs:{src:e("l3+1")}})]):t._e()]),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.foodNum.num?i("span",{staticClass:"cart_num"},[t._v(t._s(t.foodNum.num))]):t._e()]),t._v(" "),i("i",{staticClass:"add-icon",on:{click:function(s){s.stopPropagation(),t.addToCart(t.foods,s)}}},[i("img",{attrs:{src:e("O9c/")}})])],1)},staticRenderFns:[]};var u=e("VU/8")(l,d,!1,function(t){e("EInh")},"data-v-27f7df40",null);s.a=u.exports},"qvX/":function(t,s){}});
//# sourceMappingURL=2.fbc8c1f3fe6bc28e824a.js.map