webpackJsonp([40],{EV1k:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Dd8w"),o=s.n(i),n=s("uaSg"),r=s("VUa8"),a=s("NYxO"),c={name:"login",data:function(){return{tel:"",veriCode:"",verifyErrorCount:0,vcode:n.c+"index.php/index-gen_vcode-b2c-4.html",wait60s:!1,posting:!1,second:60,redirect:this.$route.query.redirect}},computed:o()({},Object(a.c)({storeInfo:function(e){return e.common.common_data.store_info}})),methods:o()({},Object(a.b)(["set_user_login_status","set_user_info","set_user_bind_status"]),{getCode:function(){var e=this;this.verifyErrorCount>=3||(r.a.check_mobile(this.tel)?!0!==this.posting&&(this.$myLoading.open({text:"加载中...",spinnerType:"fading-circle"}),this.posting=!0,this.$http.post(this.API.auth.mobile_code,{phoneNumber:this.tel,type:"login"}).then(function(t){if(e.$myLoading.close(),e.posting=!1,"0000"===t.return_code){var s=e;s.wait60s=!0;var i=setInterval(function(){s.second-=1,0===s.second&&(clearInterval(i),s.wait60s=!1,s.second=60)},1e3)}else e.$myToast(t.return_msg)})):this.$myToast("请输入正确的手机号"))},doLogin:function(){var e=this;r.a.check_mobile(this.tel)?this.veriCode?(this.$myLoading.open({text:"加载中...",spinnerType:"fading-circle"}),this.$http.post(this.API.auth.login,{phoneNumber:this.tel,captcha:this.veriCode,type:"login"}).then(function(t){if(e.$myLoading.close(),"0000"!==t.return_code)return e.verifyErrorCount+=1,void e.$myToast(t.return_msg);e.redirect?(e.set_user_login_status(1),e.set_user_info(t.data.userinfo),e.set_user_bind_status(1),e.$router.push(e.redirect)):e.$router.push("/center")})):this.$myToast("请输入验证码"):this.$myToast("请输入正确的手机号")}})},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bind-tel-page"},[i("div",{staticClass:"mask-wrapper"},[i("div",{staticStyle:{height:"2px"}}),e._v(" "),e.storeInfo?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.storeInfo.store_log,expression:"storeInfo.store_log"}],staticClass:"store-logo"}):i("img",{staticClass:"store-logo",attrs:{src:s("Qcae")}}),e._v(" "),i("div",{staticClass:"input-wrapper tel"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],attrs:{type:"tel",placeholder:"请输入手机号"},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"input-wrapper veri-code"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.veriCode,expression:"veriCode"}],attrs:{type:"text",maxlength:"6",placeholder:"请输入验证码"},domProps:{value:e.veriCode},on:{input:function(t){t.target.composing||(e.veriCode=t.target.value)}}}),e._v(" "),i("div",{staticClass:"get-code"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.wait60s,expression:"!wait60s"}],staticClass:"get",on:{click:e.getCode}},[e._v("获取验证码")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.wait60s,expression:"wait60s"}],staticClass:"repeat-get"},[e._v("\n          重新发送("+e._s(e.second)+"s)\n        ")])])]),e._v(" "),i("button",{staticClass:"btn",on:{click:e.doLogin}},[e._v("\n      登录\n    ")])])])},staticRenderFns:[]};var d=s("VU/8")(c,l,!1,function(e){s("QcrJ")},"data-v-6b622d03",null);t.default=d.exports},QcrJ:function(e,t){}});
//# sourceMappingURL=40.c6ac63193cfc1786b6b6.js.map